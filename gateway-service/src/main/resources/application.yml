server:
  port: 8000

spring:
  application:
    name: gateway-service
  main:
    web-application-type: reactive
  codec:
    max-in-memory-size: 50MB
  cloud:
    gateway:
      httpclient:
        max-in-memory-size: 52428800
        connect-timeout: 30000
        response-timeout: 120s
      routes:
        - id: user-service
          uri: http://localhost:8001
          predicates:
            - Path=/api/user/**
        - id: user-users
          uri: http://localhost:8001
          predicates:
            - Path=/users/**
        - id: user-login
          uri: http://localhost:8001
          predicates:
            - Path=/login/**
        - id: diary-service
          uri: http://localhost:8002
          predicates:
            - Path=/api/diary/**
        - id: tag-endpoint
          uri: http://localhost:8002
          predicates:
            - Path=/api/tag/**
        - id: file-service-uploads
          uri: http://localhost:8003
          predicates:
            - Path=/uploads/**
        - id: file-service-api
          uri: http://localhost:8003
          predicates:
            - Path=/api/file/**
        - id: emotion-service
          uri: http://localhost:8004
          predicates:
            - Path=/api/emotion/**
        - id: emotion-analysis-service
          uri: http://localhost:8004
          predicates:
            - Path=/api/analysis/**
        - id: anonymous-service
          uri: http://localhost:8005
          predicates:
            - Path=/api/anonymous/**
        - id: consultation-service
          uri: http://localhost:8006
          predicates:
            - Path=/api/consultation/**
        - id: ai-service
          uri: http://localhost:8008
          predicates:
            - Path=/api/ai/**
        - id: friend-service
          uri: http://localhost:8008
          predicates:
            - Path=/api/friend/**
        - id: quote-service
          uri: http://localhost:8009
          predicates:
            - Path=/api/quotes/**
        - id: mysterybox-service
          uri: http://localhost:8010
          predicates:
            - Path=/api/mysterybox/**
        - id: anonymous-posts-service
          uri: http://localhost:8005
          predicates:
            - Path=/api/anonymous-posts/**
        - id: mystery-box-service
          uri: http://localhost:8010
          predicates:
            - Path=/api/mystery-box/**
        - id: capsule-service
          uri: http://localhost:8011
          predicates:
            - Path=/api/capsules/**
        - id: app-service
          uri: http://localhost:8012
          predicates:
            - Path=/app/**
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOriginPatterns: "*"
            allowedMethods: "*"
            allowedHeaders: "*"
            allowCredentials: true

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.reactive: DEBUG 