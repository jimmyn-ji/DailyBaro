{"version":3,"file":"api.js","sources":["utils/api.js"],"sourcesContent":["// APIåŸºç¡€é…ç½®\nimport { config, checkGatewayHealth } from './config.js'\n\nlet BASE_URL = config.BASE_URL // åŠ¨æ€ç½‘å…³åœ°å€\nconst NLP_SERVICE_URL = config.NLP_SERVICE_URL // ä»Žé…ç½®æ–‡ä»¶èŽ·å–NLPæœåŠ¡åœ°å€\nconst API_PREFIX = '' // ç§»é™¤/apiå‰ç¼€ï¼Œé¿å…é‡å¤\n\n// åˆå§‹åŒ–ç½‘å…³åœ°å€\nconst initGateway = async () => {\n\ttry {\n\t\tBASE_URL = await checkGatewayHealth()\n\t\tconsole.log('âœ… åˆå§‹åŒ–ç½‘å…³åœ°å€:', BASE_URL)\n\t\tconsole.log('âœ… é…ç½®çš„BASE_URL:', config.BASE_URL)\n\t\tif (BASE_URL !== config.BASE_URL) {\n\t\t\tconsole.warn('âš ï¸ ç½‘å…³åœ°å€ä¸Žé…ç½®ä¸ä¸€è‡´ï¼Œä½¿ç”¨:', BASE_URL)\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('âŒ ç½‘å…³åˆå§‹åŒ–å¤±è´¥:', error)\n\t\t// ä½¿ç”¨é»˜è®¤é…ç½®\n\t\tBASE_URL = config.BASE_URL\n\t\tconsole.log('âœ… ä½¿ç”¨é»˜è®¤é…ç½®:', BASE_URL)\n\t}\n}\n\n// è¯·æ±‚æ‹¦æˆªå™¨\nconst request = (options) => {\n\treturn new Promise(async (resolve, reject) => {\n\t\t// ç¡®ä¿ç½‘å…³å·²åˆå§‹åŒ–\n\t\tif (!BASE_URL || BASE_URL === config.BASE_URL) {\n\t\t\tawait initGateway()\n\t\t}\n\t\t\n\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\tconst uid = userInfo ? (userInfo.uid || userInfo.id || userInfo.userId) : null\n\t\t\n\t\t// æ·»åŠ è¯·æ±‚æ—¥å¿—\n\t\tif (config.DEBUG) {\n\t\t\tconsole.log('APIè¯·æ±‚:', {\n\t\t\t\turl: BASE_URL + API_PREFIX + options.url,\n\t\t\t\tmethod: options.method || 'GET',\n\t\t\t\tdata: options.data || {},\n\t\t\t\tgateway: BASE_URL\n\t\t\t})\n\t\t}\n\t\t\n\t\tconst method = (options.method || 'GET').toUpperCase()\n\t\t\n\t\t// ç¡®ä¿POSTè¯·æ±‚çš„dataæ­£ç¡®ä¼ é€’\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œuni.request ä¼šè‡ªåŠ¨åºåˆ—åŒ– dataï¼Œä½†éœ€è¦ç¡®ä¿ data ä¸æ˜¯ undefined\n\t\tlet finalData = options.data\n\t\tif (method === 'POST' || method === 'PUT' || method === 'PATCH') {\n\t\t\tif (finalData === undefined || finalData === null) {\n\t\t\t\tfinalData = {}\n\t\t\t\tconsole.warn('POSTè¯·æ±‚dataä¸ºç©ºï¼Œä½¿ç”¨ç©ºå¯¹è±¡')\n\t\t\t} else {\n\t\t\t\t// ç¡®ä¿ data æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…¶ä»–ç±»åž‹\n\t\t\t\tif (typeof finalData !== 'object' || Array.isArray(finalData)) {\n\t\t\t\t\tconsole.warn('POSTè¯·æ±‚dataç±»åž‹å¼‚å¸¸:', typeof finalData)\n\t\t\t\t\t// å¦‚æžœç±»åž‹å¼‚å¸¸ï¼Œå°è¯•è½¬æ¢\n\t\t\t\t\tif (typeof finalData === 'string') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tfinalData = JSON.parse(finalData)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error('æ— æ³•è§£æždataå­—ç¬¦ä¸²:', e)\n\t\t\t\t\t\t\tfinalData = {}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfinalData = {}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('POSTè¯·æ±‚data:', JSON.stringify(finalData))\n\t\t\t\t\tconsole.log('POSTè¯·æ±‚data keys:', Object.keys(finalData))\n\t\t\t\t\tconsole.log('POSTè¯·æ±‚data.code:', finalData.code)\n\t\t\t\t\tconsole.log('POSTè¯·æ±‚data.code ç±»åž‹:', typeof finalData.code)\n\t\t\t\t\tconsole.log('POSTè¯·æ±‚data.code å€¼:', finalData.code)\n\t\t\t\t\t// ç¡®ä¿ code å­—æ®µå­˜åœ¨ä¸”ä¸ä¸ºç©º\n\t\t\t\t\tif (finalData.code === undefined || finalData.code === null || finalData.code === '') {\n\t\t\t\t\t\tconsole.error('è­¦å‘Šï¼šfinalData.code ä¸ºç©ºæˆ–æœªå®šä¹‰ï¼')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log('å‘é€è¯·æ±‚:', {\n\t\t\turl: BASE_URL + API_PREFIX + options.url,\n\t\t\tmethod: method,\n\t\t\tdata: finalData,\n\t\t\tdataType: typeof finalData,\n\t\t\tdataKeys: finalData ? Object.keys(finalData) : [],\n\t\t\tdataString: JSON.stringify(finalData),\n\t\t\thasCode: finalData && finalData.code ? 'YES: ' + finalData.code : 'NO'\n\t\t})\n\t\t\n\t\t// æž„å»ºè¯·æ±‚é…ç½®\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œuni.request ä¼šè‡ªåŠ¨åºåˆ—åŒ– dataï¼Œä½†éœ€è¦ç¡®ä¿ data æ˜¯å¯¹è±¡ç±»åž‹\n\t\tconst requestConfig = {\n\t\t\turl: BASE_URL + API_PREFIX + options.url,\n\t\t\tmethod: method,\n\t\t\theader: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'uid': uid || '',\n\t\t\t\t...options.header\n\t\t\t},\n\t\t\tdataType: 'json',\n\t\t\ttimeout: 10000\n\t\t}\n\t\t\n\t\t// å¯¹äºŽ POST è¯·æ±‚ï¼Œç¡®ä¿ Content-Type æ­£ç¡®è®¾ç½®\n\t\tif (method === 'POST' || method === 'PUT' || method === 'PATCH') {\n\t\t\t// ç¡®ä¿ Content-Type æ˜¯ application/json\n\t\t\tif (!requestConfig.header['Content-Type']) {\n\t\t\t\trequestConfig.header['Content-Type'] = 'application/json'\n\t\t\t}\n\t\t}\n\t\t\n\t\t// ç¡®ä¿ data æ­£ç¡®è®¾ç½®\n\t\tif (method === 'GET') {\n\t\t\trequestConfig.data = finalData || {}\n\t\t} else {\n\t\t\t// POST/PUT/PATCH è¯·æ±‚ï¼Œç¡®ä¿ data å­˜åœ¨ä¸”æ˜¯å¯¹è±¡\n\t\t\tif (finalData && typeof finalData === 'object' && !Array.isArray(finalData)) {\n\t\t\t\trequestConfig.data = finalData\n\t\t\t} else {\n\t\t\t\trequestConfig.data = finalData || {}\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log('uni.request æœ€ç»ˆé…ç½®:', {\n\t\t\turl: requestConfig.url,\n\t\t\tmethod: requestConfig.method,\n\t\t\tdata: requestConfig.data,\n\t\t\tdataType: typeof requestConfig.data,\n\t\t\tdataKeys: requestConfig.data ? Object.keys(requestConfig.data) : [],\n\t\t\tdataString: JSON.stringify(requestConfig.data),\n\t\t\thasCode: requestConfig.data && requestConfig.data.code ? 'YES: ' + requestConfig.data.code : 'NO',\n\t\t\theader: requestConfig.header\n\t\t})\n\t\t\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œå¯¹äºŽPOSTè¯·æ±‚ï¼Œuni.requestä¼šè‡ªåŠ¨åºåˆ—åŒ–å¯¹è±¡ä¸ºJSONå­—ç¬¦ä¸²\n\t\t// ä½†éœ€è¦ç¡®ä¿ data æ˜¯å¯¹è±¡ç±»åž‹ï¼Œä¸æ˜¯å­—ç¬¦ä¸²\n\t\tlet requestData = requestConfig.data\n\t\t\n\t\t// å¯¹äºŽ POST/PUT/PATCH è¯·æ±‚ï¼Œç¡®ä¿ data æ˜¯å¯¹è±¡ç±»åž‹\n\t\tif ((method === 'POST' || method === 'PUT' || method === 'PATCH') && requestData) {\n\t\t\t// å¦‚æžœ data æ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•è§£æž\n\t\t\tif (typeof requestData === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\trequestData = JSON.parse(requestData)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn('data æ˜¯å­—ç¬¦ä¸²ä½†æ— æ³•è§£æžä¸ºJSON:', e)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log('æœ€ç»ˆè°ƒç”¨ uni.requestï¼Œdata:', requestData)\n\t\tconsole.log('data åºåˆ—åŒ–:', JSON.stringify(requestData))\n\t\tconsole.log('data.code å€¼:', requestData && requestData.code ? requestData.code : 'NO CODE')\n\t\tconsole.log('data.code ç±»åž‹:', requestData && requestData.code ? typeof requestData.code : 'NO CODE')\n\t\tconsole.log('Content-Type:', requestConfig.header['Content-Type'])\n\t\tconsole.log('å®Œæ•´ header:', requestConfig.header)\n\t\t\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œuni.request ä¼šè‡ªåŠ¨åºåˆ—åŒ–å¯¹è±¡ä¸º JSON\n\t\t// ä½†éœ€è¦ç¡®ä¿ Content-Type æ­£ç¡®è®¾ç½®\n\t\tconst finalHeaders = { ...requestConfig.header }\n\t\tif ((method === 'POST' || method === 'PUT' || method === 'PATCH') && requestData) {\n\t\t\t// ç¡®ä¿ Content-Type æ˜¯ application/json\n\t\t\tfinalHeaders['Content-Type'] = 'application/json'\n\t\t\t// ç¡®ä¿ data æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å­—ç¬¦ä¸²\n\t\t\tif (typeof requestData === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\trequestData = JSON.parse(requestData)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn('data æ˜¯å­—ç¬¦ä¸²ä½†æ— æ³•è§£æžä¸ºJSON:', e)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// é‡è¦ï¼šç¡®ä¿ requestData ä¸æ˜¯ç©ºå¯¹è±¡ï¼Œå¹¶ä¸”æœ‰å®žé™…å†…å®¹\n\t\t\tif (requestData && typeof requestData === 'object' && Object.keys(requestData).length === 0) {\n\t\t\t\tconsole.warn('è­¦å‘Šï¼šrequestData æ˜¯ç©ºå¯¹è±¡ï¼Œå¯èƒ½å¯¼è‡´åŽç«¯æŽ¥æ”¶ä¸åˆ°æ•°æ®')\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log('æœ€ç»ˆå‘é€çš„ data:', requestData)\n\t\tconsole.log('æœ€ç»ˆå‘é€çš„ data ç±»åž‹:', typeof requestData)\n\t\tconsole.log('æœ€ç»ˆå‘é€çš„ data é”®:', requestData ? Object.keys(requestData) : [])\n\t\tconsole.log('æœ€ç»ˆå‘é€çš„ data JSON:', JSON.stringify(requestData))\n\t\tconsole.log('æœ€ç»ˆå‘é€çš„ header:', finalHeaders)\n\t\t\n\t\t// åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œuni.request çš„ data å‚æ•°å¦‚æžœæ˜¯å¯¹è±¡ï¼Œä¼šè‡ªåŠ¨åºåˆ—åŒ–ä¸º JSON\n\t\t// ä½†éœ€è¦ç¡®ä¿ data ä¸æ˜¯ undefined æˆ– null\n\t\t// é‡è¦ï¼šå¯¹äºŽ POST è¯·æ±‚ï¼Œç¡®ä¿ data æ˜¯å¯¹è±¡ç±»åž‹ï¼Œuni.request ä¼šè‡ªåŠ¨åºåˆ—åŒ–\n\t\tlet requestDataFinal = requestData !== undefined && requestData !== null ? requestData : {}\n\t\t\n\t\t// ç¡®ä¿ requestDataFinal æ˜¯å¯¹è±¡ç±»åž‹ï¼Œä¸æ˜¯å­—ç¬¦ä¸²\n\t\tif ((method === 'POST' || method === 'PUT' || method === 'PATCH') && requestDataFinal) {\n\t\t\tif (typeof requestDataFinal === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\trequestDataFinal = JSON.parse(requestDataFinal)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn('requestDataFinal æ˜¯å­—ç¬¦ä¸²ä½†æ— æ³•è§£æžä¸ºJSON:', e)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ç¡®ä¿æ˜¯æ™®é€šå¯¹è±¡ï¼Œä¸æ˜¯æ•°ç»„æˆ–å…¶ä»–ç±»åž‹\n\t\t\tif (typeof requestDataFinal !== 'object' || Array.isArray(requestDataFinal)) {\n\t\t\t\tconsole.warn('requestDataFinal ç±»åž‹å¼‚å¸¸ï¼Œè½¬æ¢ä¸ºå¯¹è±¡:', typeof requestDataFinal)\n\t\t\t\trequestDataFinal = {}\n\t\t\t}\n\t\t}\n\t\t\n\t\tconsole.log('æœ€ç»ˆä¼ é€’ç»™ uni.request çš„ data:', requestDataFinal)\n\t\tconsole.log('æœ€ç»ˆä¼ é€’ç»™ uni.request çš„ data JSON:', JSON.stringify(requestDataFinal))\n\t\tconsole.log('æœ€ç»ˆä¼ é€’ç»™ uni.request çš„ data ç±»åž‹:', typeof requestDataFinal)\n\t\tconsole.log('æœ€ç»ˆä¼ é€’ç»™ uni.request çš„ data é”®æ•°é‡:', requestDataFinal ? Object.keys(requestDataFinal).length : 0)\n\t\tconsole.log('æœ€ç»ˆä¼ é€’ç»™ uni.request çš„å®Œæ•´é…ç½®:', {\n\t\t\turl: requestConfig.url,\n\t\t\tmethod: requestConfig.method,\n\t\t\tdata: requestDataFinal,\n\t\t\theader: finalHeaders\n\t\t})\n\t\t\n\t\tuni.request({\n\t\t\turl: requestConfig.url,\n\t\t\tmethod: requestConfig.method,\n\t\t\tdata: requestDataFinal,\n\t\t\theader: finalHeaders,\n\t\t\tdataType: requestConfig.dataType,\n\t\t\ttimeout: requestConfig.timeout,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (config.DEBUG) {\n\t\t\t\t\tconsole.log('APIå“åº”:', {\n\t\t\t\t\t\turl: options.url,\n\t\t\t\t\t\tstatus: res.statusCode,\n\t\t\t\t\t\tdata: res.data\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\tresolve(res.data)\n\t\t\t\t} else if (res.statusCode === 401) {\n\t\t\t\t\t// æœªæŽˆæƒï¼Œè·³è½¬ç™»å½•\n\t\t\t\t\tuni.removeStorageSync('userInfo')\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl: '/pages/login/login'\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 1500)\n\t\t\t\t\treject(new Error('ç™»å½•å·²è¿‡æœŸ'))\n\t\t\t\t} else if (res.statusCode === 404) {\n\t\t\t\t\t// 404é”™è¯¯ï¼Œå¯èƒ½æ˜¯ç½‘å…³é—®é¢˜\n\t\t\t\t\tconsole.error('404é”™è¯¯ï¼Œå°è¯•åˆ‡æ¢ç½‘å…³')\n\t\t\t\t\treject(new Error(`æŽ¥å£ä¸å­˜åœ¨: ${options.url}ï¼Œè¯·æ£€æŸ¥ç½‘å…³é…ç½®`))\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(res.data?.message || `è¯·æ±‚å¤±è´¥: ${res.statusCode}`))\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.error('APIè¯·æ±‚å¤±è´¥:', {\n\t\t\t\t\turl: options.url,\n\t\t\t\t\terror: err,\n\t\t\t\t\tgateway: BASE_URL\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// å¦‚æžœæ˜¯ç½‘ç»œé”™è¯¯ï¼Œå°è¯•åˆ‡æ¢ç½‘å…³\n\t\t\t\tif (err.errMsg && err.errMsg.includes('fail')) {\n\t\t\t\t\tconsole.log('ðŸ”„ å°è¯•åˆ‡æ¢ç½‘å…³...')\n\t\t\t\t\tinitGateway().then(() => {\n\t\t\t\t\t\t// é‡æ–°å‘èµ·è¯·æ±‚\n\t\t\t\t\t\trequest(options).then(resolve).catch(reject)\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\treject(new Error('ç½‘å…³åˆ‡æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥'))\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(err.errMsg || 'ç½‘ç»œè¯·æ±‚å¤±è´¥'))\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t})\n}\n\n// NLPæœåŠ¡è¯·æ±‚ï¼ˆæœ¬åœ°æœåŠ¡ï¼‰\nconst nlpRequest = (options) => {\n\treturn new Promise((resolve, reject) => {\n\t\tuni.request({\n\t\t\turl: NLP_SERVICE_URL + options.url,\n\t\t\tmethod: options.method || 'POST',\n\t\t\tdata: options.data || {},\n\t\t\theader: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t...options.header\n\t\t\t},\n\t\t\tsuccess: (res) => {\n\t\t\t\t// å¥åº·æ£€æŸ¥å…è®¸éž200çŠ¶æ€ç ï¼Œä¸æŠ›å‡ºé”™è¯¯\n\t\t\t\tif (options.url === '/api/health') {\n\t\t\t\t\tif (res.statusCode === 200 || res.statusCode === 426) {\n\t\t\t\t\t\tresolve({ available: res.statusCode === 200, status: res.statusCode })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({ available: false, status: res.statusCode })\n\t\t\t\t\t}\n\t\t\t\t} else if (res.statusCode === 200) {\n\t\t\t\t\tresolve(res.data)\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(res.data?.message || `NLPæœåŠ¡è¯·æ±‚å¤±è´¥: ${res.statusCode}`))\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\t// å¥åº·æ£€æŸ¥å¤±è´¥æ—¶è¿”å›žä¸å¯ç”¨çŠ¶æ€ï¼Œä¸æŠ›å‡ºé”™è¯¯\n\t\t\t\tif (options.url === '/api/health') {\n\t\t\t\t\tresolve({ available: false, error: err.errMsg })\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(err.errMsg || 'NLPæœåŠ¡è¿žæŽ¥å¤±è´¥'))\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t})\n}\n\n// ç”¨æˆ·ç›¸å…³API\nexport const userApi = {\n\t// ç”¨æˆ·æ³¨å†Œ\n\tregister: (data) => {\n\t\treturn request({\n\t\t\turl: '/api/login/doRegister',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// ç”¨æˆ·ç™»å½•\n\tlogin: (data) => {\n\t\treturn request({\n\t\t\turl: '/api/login/doLogin',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// å¾®ä¿¡ç™»å½•ï¼ˆé€šè¿‡ app-service è½¬å‘åˆ°åŽç«¯ /login/wxLoginï¼‰\n\twechatLogin: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/login/wxLogin',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// èŽ·å–ç”¨æˆ·ä¿¡æ¯\n\tgetUserInfo: (uid) => {\n\t\treturn request({\n\t\t\turl: `/app/users/getMyInfo/${uid}`,\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// æ›´æ–°ç”¨æˆ·ä¿¡æ¯\n\tupdateUserInfo: (uid, data) => {\n\t\treturn request({\n\t\t\turl: `/app/users/updateUserInfo`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: { ...data, uid }\n\t\t})\n\t},\n\t\n\t// åˆ é™¤ç”¨æˆ·\n\tdeleteUser: (uid) => {\n\t\treturn request({\n\t\t\turl: `/api/user/delete/${uid}`,\n\t\t\tmethod: 'DELETE'\n\t\t})\n\t},\n\n\t// èŽ·å–æŽ¨èåˆ—è¡¨ï¼ˆä½¿ç”¨ knowledge-service çš„æŽ¨èæŽ¥å£ï¼‰\n\tgetRecommendations: () => {\n\t\treturn request({\n\t\t\turl: '/api/knowledge/recommendation/by-emotion?days=7',\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// æ‰§è¡Œæ´»åŠ¨\n\tperformActivity: (uid, activityId) => {\n\t\treturn request({\n\t\t\turl: '/app/activities/perform',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tuid: uid,\n\t\t\t\tactivityId: activityId\n\t\t\t}\n\t\t})\n\t}\n}\n\n// æ—¥è®°ç›¸å…³API\nexport const diaryApi = {\n\t// èŽ·å–æ—¥è®°åˆ—è¡¨\n\tgetDiaries: (params = {}) => {\n\t\t// æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š\n\t\t// 1. getDiaries(uid, status) - å‘åŽå…¼å®¹\n\t\t// 2. getDiaries({uid, status}) - æ–°çš„å¯¹è±¡å‚æ•°æ–¹å¼\n\t\tlet queryParams = {}\n\t\tif (typeof params === 'string' || typeof params === 'number') {\n\t\t\t// å‘åŽå…¼å®¹ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯uid\n\t\t\tconst uid = params\n\t\t\tconst status = arguments[1] || 'all'\n\t\t\tqueryParams = { uid, status }\n\t\t} else {\n\t\t\t// æ–°çš„å¯¹è±¡å‚æ•°æ–¹å¼\n\t\t\tqueryParams = params\n\t\t}\n\t\t\n\t\treturn request({\n\t\t\turl: `/api/diary`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: queryParams\n\t\t})\n\t},\n\t\n\t// èŽ·å–æ—¥è®°è¯¦æƒ…\n\tgetDiaryDetail: (id) => {\n\t\treturn request({\n\t\t\turl: `/app/diary/detail/${id}`,\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// åˆ›å»ºæ—¥è®°\n\tcreateDiary: (data) => {\n\t\treturn request({\n\t\t\turl: '/api/diary',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// æ›´æ–°æ—¥è®°\n\tupdateDiary: (id, data) => {\n\t\treturn request({\n\t\t\turl: `/api/diary/${id}`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// åˆ é™¤æ—¥è®°\n\tdeleteDiary: (id) => {\n\t\treturn request({\n\t\t\turl: `/api/diary/${id}`,\n\t\t\tmethod: 'DELETE'\n\t\t})\n\t},\n\t\n\t// æŒ‰æ ‡ç­¾æŸ¥è¯¢æ—¥è®°\n\tsearchByTag: (uid, tag) => {\n\t\treturn request({\n\t\t\turl: `/api/diary/search`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid, tag }\n\t\t})\n\t}\n}\n\n// åŒ¿åæ˜ŸçƒAPI\nexport const anonymousApi = {\n\t// èŽ·å–åŠ¨æ€åˆ—è¡¨\n\tgetPosts: (page = 1, size = 20) => {\n\t\treturn request({\n\t\t\turl: `/app/anonymous-posts`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { page, size }\n\t\t})\n\t},\n\t\n\t// å‘å¸ƒåŠ¨æ€\n\tcreatePost: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/anonymous-posts',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// ç‚¹èµžåŠ¨æ€\n\tlikePost: (postId) => {\n\t\treturn request({\n\t\t\turl: `/app/anonymous-posts/${postId}/like`,\n\t\t\tmethod: 'POST'\n\t\t})\n\t},\n\t\n\t// è¯„è®ºåŠ¨æ€\n\tcommentPost: (postId, data) => {\n\t\treturn request({\n\t\t\turl: `/app/anonymous-posts/${postId}/comment`,\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t}\n}\n\n// æƒ…ç»ªåˆ†æžAPI\nexport const emotionApi = {\n\t// åˆ†æžæƒ…ç»ª\n\tanalyzeEmotion: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/emotion/analysis',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// åŸºäºŽæ—¥è®°é™„ä»¶åˆ†æžæƒ…ç»ª\n\tanalyzeFromDiary: (diaryId, type) => {\n\t\treturn request({\n\t\t\turl: '/app/emotion/analysis/from-diary',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { diaryId, type }\n\t\t})\n\t},\n\t\n\t// èŽ·å–åˆ†æžåŽ†å²\n\tgetAnalysisHistory: (uid) => {\n\t\t// å…¼å®¹åŽç«¯æŽ¥å£ï¼šæ”¹ä¸º /api/analysis/result æˆ– /app/analysis/result äºŒé€‰ä¸€\n\t\treturn request({\n\t\t\turl: `/app/analysis/result`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid }\n\t\t}).catch(() => {\n\t\t\treturn request({\n\t\t\t\turl: `/api/analysis/result`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: { uid }\n\t\t\t})\n\t\t})\n\t},\n\t\n\t// èŽ·å–æƒ…ç»ªç»Ÿè®¡\n\tgetEmotionStats: (uid, period = 'week') => {\n\t\treturn request({\n\t\t\turl: `/api/emotion/visualization`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid, period }\n\t\t})\n\t},\n\t\n\t// å¯¼å‡ºåˆ†æžæŠ¥å‘Š\n\texportReport: (uid, format = 'pdf') => {\n\t\treturn request({\n\t\t\turl: `/api/emotion/export`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: { uid, format }\n\t\t})\n\t}\n}\n\n// NLPæƒ…ç»ªè¯†åˆ«APIï¼ˆæœ¬åœ°æœåŠ¡ï¼‰\nexport const nlpEmotionApi = {\n\t// æ™ºèƒ½æƒ…ç»ªåˆ†æž\n\tanalyzeEmotion: (text) => {\n\t\treturn nlpRequest({\n\t\t\turl: '/api/nlp/emotion/analyze',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { text }\n\t\t})\n\t},\n\t\n\t// æ‰¹é‡æƒ…ç»ªåˆ†æž\n\tbatchAnalyzeEmotion: (texts) => {\n\t\treturn nlpRequest({\n\t\t\turl: '/api/nlp/emotion/batch-analyze',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { texts }\n\t\t})\n\t},\n\t\n\t// æƒ…ç»ªåˆ†ç±»\n\tclassifyEmotion: (text, topK = 3) => {\n\t\treturn nlpRequest({\n\t\t\turl: '/api/nlp/emotion/classify',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { text, top_k: topK }\n\t\t})\n\t},\n\t\n\t// èŽ·å–æœåŠ¡ä¿¡æ¯\n\tgetServiceInfo: () => {\n\t\treturn nlpRequest({\n\t\t\turl: '/api/nlp/emotion/info',\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// å¥åº·æ£€æŸ¥\n\thealthCheck: () => {\n\t\treturn nlpRequest({\n\t\t\turl: '/api/health',\n\t\t\tmethod: 'GET'\n\t\t})\n\t}\n}\n\n// æƒ…ç»ªèƒ¶å›ŠAPI\nexport const capsuleApi = {\n\t// èŽ·å–èƒ¶å›Šåˆ—è¡¨\n\tgetCapsules: (uid, status = 'all') => {\n\t\treturn request({\n\t\t\turl: `/app/capsules`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid, status }\n\t\t})\n\t},\n\t\n\t// åˆ›å»ºèƒ¶å›Š\n\tcreateCapsule: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/capsules/json',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// å¼€å¯èƒ¶å›Š\n\topenCapsule: (id) => {\n\t\treturn request({\n\t\t\turl: `/app/capsules/${id}/open`,\n\t\t\tmethod: 'POST'\n\t\t})\n\t},\n\t\n\t// åˆ é™¤èƒ¶å›Š\n\tdeleteCapsule: (id) => {\n\t\treturn request({\n\t\t\turl: `/app/capsules/${id}`,\n\t\t\tmethod: 'DELETE'\n\t\t})\n\t},\n\t\n\t// èŽ·å–æœªè¯»æé†’\n\tgetUnreadReminders: () => {\n\t\treturn request({\n\t\t\turl: '/app/capsules/reminders/unread',\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// æ ‡è®°æé†’ä¸ºå·²è¯»\n\tmarkReminderRead: (id) => {\n\t\treturn request({\n\t\t\turl: `/app/capsules/reminders/${id}/read`,\n\t\t\tmethod: 'POST'\n\t\t})\n\t}\n}\n\n// ç¥žç§˜ç›’å­API\nexport const mysteryBoxApi = {\n\t// èŽ·å–ç”¨æˆ·èƒ½é‡å€¼\n\tgetUserEnergy: (uid) => {\n\t\treturn request({\n\t\t\turl: `/api/mystery-box/energy`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid }\n\t\t})\n\t},\n\t\n\t// æŠ½å–ç›²ç›’\n\tdrawBox: (uid) => {\n\t\treturn request({\n\t\t\turl: '/api/mystery-box/draw',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { uid }\n\t\t})\n\t},\n\t\n\t// å®Œæˆä»»åŠ¡\n\tcompleteTask: (taskId) => {\n\t\treturn request({\n\t\t\turl: `/api/mystery-box/complete/${taskId}`,\n\t\t\tmethod: 'POST'\n\t\t})\n\t},\n\t\n\t// èŽ·å–æŠ½å–åŽ†å²\n\tgetDrawHistory: (uid) => {\n\t\treturn request({\n\t\t\turl: `/api/mystery-box/records`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid }\n\t\t})\n\t}\n}\n\n// æ—¥ç­¾API\nexport const quoteApi = {\n\t// èŽ·å–ä»Šæ—¥æ—¥ç­¾\n\tgetDailyQuote: () => {\n\t\treturn request({\n\t\t\turl: '/api/quotes/custom',\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// èŽ·å–ç”¨æˆ·æ—¥ç­¾\n\tgetUserQuotes: (uid) => {\n\t\treturn request({\n\t\t\turl: `/api/quotes/random/user`,\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid }\n\t\t})\n\t},\n\t\n\t// åˆ›å»ºæ—¥ç­¾\n\tcreateQuote: (data) => {\n\t\treturn request({\n\t\t\turl: '/api/quotes/custom',\n\t\t\tmethod: 'POST',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// æ›´æ–°æ—¥ç­¾\n\tupdateQuote: (id, data) => {\n\t\treturn request({\n\t\t\turl: `/api/quotes/custom/${id}`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata\n\t\t})\n\t},\n\t\n\t// åˆ é™¤æ—¥ç­¾\n\tdeleteQuote: (id) => {\n\t\treturn request({\n\t\t\turl: `/api/quotes/custom/${id}`,\n\t\t\tmethod: 'DELETE'\n\t\t})\n\t},\n\t\n\t// èŽ·å–æ—¥ç­¾åŽ†å²\n\tgetQuoteHistory: (uid) => {\n\t\treturn request({\n\t\t\turl: '/api/quotes/history',\n\t\t\tmethod: 'GET',\n\t\t\tdata: { uid }\n\t\t})\n\t}\n}\n\n// AIåŠ©æ‰‹API\nexport const aiApi = {\n\t// æ™ºèƒ½å¯¹è¯\n\tchat: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/ai/query',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tmessage: data.message || data.question || '',\n\t\t\t\ttimestamp: data.timestamp || Date.now()\n\t\t\t}\n\t\t})\n\t},\n\t\n\t// åŸºäºŽæ—¥è®°çš„æ™ºèƒ½åˆ†æž\n\tdiaryAnalysis: (diaryContent) => {\n\t\treturn request({\n\t\t\turl: '/app/ai/query',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { \n\t\t\t\tmessage: `è¯·åˆ†æžä»¥ä¸‹æ—¥è®°å†…å®¹å¹¶ç»™å‡ºæƒ…ç»ªå»ºè®®ï¼š${diaryContent}`,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t}\n\t\t})\n\t},\n\t\n\t// èŽ·å–å¸¸è§é—®é¢˜\n\tgetCommonQuestions: () => {\n\t\treturn request({\n\t\t\turl: '/app/ai/query',\n\t\t\tmethod: 'POST',\n\t\t\tdata: { \n\t\t\t\tmessage: 'è¯·ç»™æˆ‘ä¸€äº›å¸¸è§çš„å¿ƒç†å¥åº·é—®é¢˜å»ºè®®',\n\t\t\t\ttimestamp: Date.now()\n\t\t\t}\n\t\t})\n\t}\n}\n\n// çŸ¥è¯†åº“API\nexport const knowledgeApi = {\n\t// æœç´¢çŸ¥è¯†ï¼ˆæ”¯æŒRAGï¼‰\n\tsearch: (data) => {\n\t\treturn request({\n\t\t\turl: '/app/knowledge/search',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tquery: data.query || '',\n\t\t\t\tuseRAG: data.useRAG !== false,\n\t\t\t\tpage: data.page || 1,\n\t\t\t\tsize: data.size || 20\n\t\t\t}\n\t\t})\n\t},\n\t\n\t// èŽ·å–çŸ¥è¯†è¯¦æƒ…\n\tgetDetail: (id) => {\n\t\treturn request({\n\t\t\turl: '/app/knowledge/' + id,\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// æŒ‰åˆ†ç±»èŽ·å–\n\tgetByCategory: (category) => {\n\t\treturn request({\n\t\t\turl: '/app/knowledge/category/' + encodeURIComponent(category),\n\t\t\tmethod: 'GET'\n\t\t})\n\t},\n\t\n\t// æŒ‰å­åˆ†ç±»èŽ·å–\n\tgetBySubcategory: (category, subcategory) => {\n\t\treturn request({\n\t\t\turl: '/app/knowledge/category/' + encodeURIComponent(category) + \n\t\t\t\t'/subcategory/' + encodeURIComponent(subcategory),\n\t\t\tmethod: 'GET'\n\t\t})\n\t}\n}\n\n// ä¸ªæ€§åŒ–æŽ¨èAPIï¼ˆä½¿ç”¨ knowledge-service çš„æŽ¨èæŽ¥å£ï¼‰\nexport const recommendationApi = {\n    get: () => {\n        return request({\n            url: '/api/knowledge/recommendation/by-emotion?days=7',\n            method: 'GET'\n        })\n    }\n}\n\n// æ–‡ä»¶ä¸Šä¼ API\nexport const fileApi = {\n\t// ä¸Šä¼ æ–‡ä»¶\n\tuploadFile: (filePath, type = 'image') => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\t\tconst uid = userInfo ? userInfo.uid : null\n\t\t\t\n\t\t\tuni.uploadFile({\n\t\t\t\turl: BASE_URL + '/api/uploads/media',\n\t\t\t\tfilePath: filePath,\n\t\t\t\tname: 'file',\n\t\t\t\theader: {\n\t\t\t\t\t'uid': uid || ''\n\t\t\t\t},\n\t\t\t\tformData: {\n\t\t\t\t\ttype: type\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst data = JSON.parse(res.data)\n\t\t\t\t\t\tif (data.code === 200) {\n\t\t\t\t\t\t\tresolve(data)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(new Error(data.message || 'ä¸Šä¼ å¤±è´¥'))\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treject(new Error('ä¸Šä¼ å¤±è´¥'))\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\treject(new Error(err.errMsg || 'ä¸Šä¼ å¤±è´¥'))\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n}\n\nexport default {\n\tuserApi,\n\tdiaryApi,\n\tanonymousApi,\n\temotionApi,\n\tnlpEmotionApi,\n\tcapsuleApi,\n\tmysteryBoxApi,\n\tquoteApi,\n\taiApi,\n\trecommendationApi,\n\tfileApi\n}\n"],"names":["config","checkGatewayHealth","uni"],"mappings":"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"}