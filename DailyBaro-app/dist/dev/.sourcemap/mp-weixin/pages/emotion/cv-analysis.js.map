{"version":3,"file":"cv-analysis.js","sources":["pages/emotion/cv-analysis.vue","pages/emotion/cv-analysis.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"cv-analysis-container\">\n\t\t<!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->\n\t\t<view class=\"custom-navbar\">\n\t\t\t<view class=\"navbar-left\" @click=\"goBack\">\n\t\t\t\t<text class=\"back-icon\">â†</text>\n\t\t\t</view>\n\t\t\t<view class=\"navbar-title\">CVæƒ…ç»ªåˆ†æ</view>\n\t\t\t<view class=\"navbar-right\"></view>\n\t\t</view>\n\n\t\t<!-- å†…å®¹åŒºåŸŸ -->\n\t\t<view class=\"content\">\n\t\t\t<!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->\n\t\t\t<view class=\"upload-section\">\n\t\t\t\t<view class=\"upload-area\" @click=\"chooseImage\" v-if=\"!imageUrl\">\n\t\t\t\t\t<text class=\"upload-icon\">ğŸ“·</text>\n\t\t\t\t\t<text class=\"upload-text\">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡</text>\n\t\t\t\t\t<text class=\"upload-hint\">æ”¯æŒè‡ªæ‹ã€è¡¨æƒ…å›¾ç‰‡</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"image-preview\" v-if=\"imageUrl\">\n\t\t\t\t\t<image :src=\"imageUrl\" class=\"preview-image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<view class=\"image-actions\">\n\t\t\t\t\t\t<button class=\"action-btn\" @click=\"chooseImage\">é‡æ–°é€‰æ‹©</button>\n\t\t\t\t\t\t<button class=\"action-btn primary\" @click=\"analyzeImage\">å¼€å§‹åˆ†æ</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- åˆ†æç»“æœ -->\n\t\t\t<view class=\"result-section\" v-if=\"analysisResult\">\n\t\t\t\t<view class=\"result-header\">\n\t\t\t\t\t<text class=\"result-title\">åˆ†æç»“æœ</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"result-content\">\n\t\t\t\t\t<view class=\"emotion-item\">\n\t\t\t\t\t\t<text class=\"emotion-label\">ä¸»è¦æƒ…ç»ªï¼š</text>\n\t\t\t\t\t\t<text class=\"emotion-value\">{{ analysisResult.primaryEmotion }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"emotion-item\">\n\t\t\t\t\t\t<text class=\"emotion-label\">ç½®ä¿¡åº¦ï¼š</text>\n\t\t\t\t\t\t<text class=\"emotion-value\">{{ analysisResult.confidence }}%</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"emotion-item\">\n\t\t\t\t\t\t<text class=\"emotion-label\">æƒ…ç»ªå¼ºåº¦ï¼š</text>\n\t\t\t\t\t\t<text class=\"emotion-value\">{{ analysisResult.intensity }}/10</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"emotion-details\" v-if=\"analysisResult.details\">\n\t\t\t\t\t\t<text class=\"details-title\">è¯¦ç»†åˆ†æï¼š</text>\n\t\t\t\t\t\t<view class=\"detail-item\" v-for=\"(detail, index) in analysisResult.details\" :key=\"index\">\n\t\t\t\t\t\t\t<text class=\"detail-label\">{{ detail.emotion }}ï¼š</text>\n\t\t\t\t\t\t\t<text class=\"detail-value\">{{ detail.probability }}%</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- ä½¿ç”¨è¯´æ˜ -->\n\t\t\t<view class=\"instruction-section\">\n\t\t\t\t<view class=\"instruction-header\">\n\t\t\t\t\t<text class=\"instruction-title\">ä½¿ç”¨è¯´æ˜</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"instruction-content\">\n\t\t\t\t\t<text class=\"instruction-text\">â€¢ ä¸Šä¼ æ¸…æ™°çš„äººè„¸ç…§ç‰‡ï¼Œç¡®ä¿å…‰çº¿å……è¶³</text>\n\t\t\t\t\t<text class=\"instruction-text\">â€¢ æ”¯æŒè¯†åˆ«ï¼šå¼€å¿ƒã€éš¾è¿‡ã€æ„¤æ€’ã€å¹³é™ç­‰æƒ…ç»ª</text>\n\t\t\t\t\t<text class=\"instruction-text\">â€¢ åˆ†æç»“æœä»…ä¾›å‚è€ƒï¼Œè¯·ç†æ€§å¯¹å¾…</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { config } from '@/utils/config.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\timageUrl: '',\n\t\t\tanalysisResult: null,\n\t\t\tisAnalyzing: false\n\t\t}\n\t},\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\t// è·å–åŸºç¡€URL\n\t\tgetBaseUrl() {\n\t\t\treturn config.BASE_URL\n\t\t},\n\t\t\n\t\tchooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: ['compressed'],\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.imageUrl = res.tempFilePaths[0]\n\t\t\t\t\tthis.analysisResult = null\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('é€‰æ‹©å›¾ç‰‡å¤±è´¥:', err)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'é€‰æ‹©å›¾ç‰‡å¤±è´¥',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync analyzeImage() {\n\t\t\tif (!this.imageUrl) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·å…ˆé€‰æ‹©å›¾ç‰‡',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.isAnalyzing = true\n\t\t\ttry {\n\t\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\t\tconst response = await uni.uploadFile({\n\t\t\t\t\turl: baseUrl + '/api/nlp/emotion/analyze/image',\n\t\t\t\t\tfilePath: this.imageUrl,\n\t\t\t\t\tname: 'image',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst data = JSON.parse(res.data)\n\t\t\t\t\t\t\tif (data && data.code === 200) {\n\t\t\t\t\t\t\t\tthis.analysisResult = data.data\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: 'åˆ†æå®Œæˆ',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: data?.message || 'åˆ†æå¤±è´¥',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error('å“åº”è§£æå¤±è´¥:', e)\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: 'å“åº”è§£æå¤±è´¥',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('å›¾ç‰‡ä¸Šä¼ å¤±è´¥:', err)\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('å›¾ç‰‡åˆ†æå¤±è´¥:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'åˆ†æå¤±è´¥ï¼Œè¯·é‡è¯•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.isAnalyzing = false\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.cv-analysis-container {\n\tmin-height: 100vh;\n\tbackground: #f7f7fb;\n}\n\n.custom-navbar {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 20rpx 30rpx;\n\tbackground: #ffffff;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n}\n\n.navbar-left {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.back-icon {\n\tfont-size: 36rpx;\n\tcolor: #333;\n\tmargin-right: 10rpx;\n}\n\n.navbar-title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n}\n\n.content {\n\tpadding: 30rpx;\n}\n\n.upload-section {\n\tmargin-bottom: 40rpx;\n}\n\n.upload-area {\n\tbackground: #ffffff;\n\tborder: 2rpx dashed #ddd;\n\tborder-radius: 20rpx;\n\tpadding: 60rpx 40rpx;\n\ttext-align: center;\n\ttransition: all 0.3s ease;\n}\n\n.upload-area:active {\n\tborder-color: #4a90e2;\n\tbackground: #f8f9ff;\n}\n\n.upload-icon {\n\tfont-size: 80rpx;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n}\n\n.upload-text {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n\tmargin-bottom: 10rpx;\n\tdisplay: block;\n}\n\n.upload-hint {\n\tfont-size: 26rpx;\n\tcolor: #666;\n}\n\n.image-preview {\n\tbackground: #ffffff;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n}\n\n.preview-image {\n\twidth: 100%;\n\theight: 400rpx;\n\tborder-radius: 15rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.image-actions {\n\tdisplay: flex;\n\tgap: 20rpx;\n}\n\n.action-btn {\n\tflex: 1;\n\tpadding: 20rpx;\n\tborder-radius: 15rpx;\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tborder: none;\n\ttransition: all 0.3s ease;\n}\n\n.action-btn.primary {\n\tbackground: #4a90e2;\n\tcolor: #ffffff;\n}\n\n.action-btn:not(.primary) {\n\tbackground: #f1f5f9;\n\tcolor: #64748b;\n}\n\n.action-btn:active {\n\ttransform: translateY(2rpx);\n}\n\n.result-section {\n\tbackground: #ffffff;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 40rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n}\n\n.result-header {\n\tmargin-bottom: 20rpx;\n}\n\n.result-title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n}\n\n.emotion-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 15rpx 0;\n\tborder-bottom: 1rpx solid #f1f5f9;\n}\n\n.emotion-item:last-child {\n\tborder-bottom: none;\n}\n\n.emotion-label {\n\tfont-size: 28rpx;\n\tcolor: #64748b;\n}\n\n.emotion-value {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n}\n\n.emotion-details {\n\tmargin-top: 20rpx;\n\tpadding-top: 20rpx;\n\tborder-top: 1rpx solid #f1f5f9;\n}\n\n.details-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n\tmargin-bottom: 15rpx;\n\tdisplay: block;\n}\n\n.detail-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 10rpx 0;\n}\n\n.detail-label {\n\tfont-size: 26rpx;\n\tcolor: #64748b;\n}\n\n.detail-value {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n}\n\n.instruction-section {\n\tbackground: #ffffff;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n}\n\n.instruction-header {\n\tmargin-bottom: 20rpx;\n}\n\n.instruction-title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n}\n\n.instruction-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 15rpx;\n}\n\n.instruction-text {\n\tfont-size: 26rpx;\n\tcolor: #64748b;\n\tline-height: 1.6;\n}\n</style>\n","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/emotion/cv-analysis.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","config"],"mappings":";;;AAgFA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,MACV,gBAAgB;AAAA,MAChB,aAAa;AAAA,IACd;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AACRA,oBAAAA,MAAI,aAAY;AAAA,IACjB;AAAA;AAAA,IAGA,aAAa;AACZ,aAAOC,oBAAO;AAAA,IACf;AAAA,IAEA,cAAc;AACbD,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AACjB,eAAK,WAAW,IAAI,cAAc,CAAC;AACnC,eAAK,iBAAiB;AAAA,QACvB;AAAA,QACA,MAAM,CAAC,QAAQ;AACdA,wBAAAA,MAAA,MAAA,SAAA,wCAAc,WAAW,GAAG;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAAA,QACF;AAAA,OACA;AAAA,IACF;AAAA,IACA,MAAM,eAAe;AACpB,UAAI,CAAC,KAAK,UAAU;AACnBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,WAAK,cAAc;AACnB,UAAI;AACH,cAAM,UAAU,KAAK,WAAU;AAC/B,cAAM,WAAW,MAAMA,cAAAA,MAAI,WAAW;AAAA,UACrC,KAAK,UAAU;AAAA,UACf,UAAU,KAAK;AAAA,UACf,MAAM;AAAA,UACN,SAAS,CAAC,QAAQ;AACjB,gBAAI;AACH,oBAAM,OAAO,KAAK,MAAM,IAAI,IAAI;AAChC,kBAAI,QAAQ,KAAK,SAAS,KAAK;AAC9B,qBAAK,iBAAiB,KAAK;AAC3BA,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO;AAAA,kBACP,MAAM;AAAA,iBACN;AAAA,cACF,OAAO;AACNA,8BAAAA,MAAI,UAAU;AAAA,kBACb,QAAO,6BAAM,YAAW;AAAA,kBACxB,MAAM;AAAA,iBACN;AAAA,cACF;AAAA,YACD,SAAS,GAAG;AACXA,4BAAAA,6DAAc,WAAW,CAAC;AAC1BA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,eACN;AAAA,YACF;AAAA,UACD;AAAA,UACA,MAAM,CAAC,QAAQ;AACdA,0BAAAA,MAAA,MAAA,SAAA,wCAAc,WAAW,GAAG;AAC5BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AAAA,UACF;AAAA,SACA;AAAA,MACF,SAAS,OAAO;AACfA,sBAAAA,MAAA,MAAA,SAAA,wCAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAA;AACC,aAAK,cAAc;AAAA,MACpB;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KA,GAAG,WAAW,eAAe;"}