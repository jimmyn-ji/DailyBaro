{"version":3,"file":"anonymous.js","sources":["pages/anonymous/anonymous.vue","pages/anonymous/anonymous.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"anonymous-container\">\n\t\t<!-- ÁßªÈô§‰∫ÜÈ°∂ÈÉ®ÂØºËà™Ê†è -->\n\t\t\n\t\t<view class=\"content\">\n\t\t\t<!-- ÂèëÂ∏ÉÂä®ÊÄÅÊåâÈíÆ -->\n\t\t\t<view class=\"post-section\">\n\t\t\t\t<button class=\"post-action-btn\" @tap=\"goToPost\">\n\t\t\t\t\t<text class=\"post-action-icon\">‚úèÔ∏è</text>\n\t\t\t\t\t<text class=\"post-action-text\">ÂàÜ‰∫´‰Ω†ÁöÑÂøÉÊÉÖ</text>\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- Âä®ÊÄÅÂàóË°® -->\n\t\t\t<view class=\"posts-list\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"post in posts\" \n\t\t\t\t\t:key=\"post.id\"\n\t\t\t\t\tclass=\"post-item\"\n\t\t\t\t\t@tap=\"viewPost(post.id)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"post-header\">\n\t\t\t\t\t\t<view class=\"post-avatar\">\n\t\t\t\t\t\t\t<text class=\"avatar-text\">{{ getRandomAvatar() }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"post-info\">\n\t\t\t\t\t\t\t<text class=\"post-nickname\">{{ getRandomNickname() }}</text>\n\t\t\t\t\t\t\t<text class=\"post-time\">{{ formatTime(post.createTime) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"post-content\">\n\t\t\t\t\t\t<text class=\"post-text\">{{ post.content }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"post-footer\">\n\t\t\t\t\t\t<view class=\"post-actions\">\n\t\t\t\t\t\t\t<view class=\"action-item\" @tap.stop=\"likePost(post.id)\">\n\t\t\t\t\t\t\t\t<text class=\"action-icon\">{{ post.isLiked ? '‚ù§Ô∏è' : 'ü§ç' }}</text>\n\t\t\t\t\t\t\t\t<text class=\"action-text\">{{ post.likeCount || 0 }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"action-item\" @tap.stop=\"commentPost(post.id)\">\n\t\t\t\t\t\t\t\t<text class=\"action-icon\">üí¨</text>\n\t\t\t\t\t\t\t\t<text class=\"action-text\">{{ post.commentCount || 0 }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view v-if=\"posts.length === 0\" class=\"empty-state\">\n\t\t\t\t\t<text class=\"empty-icon\">üåç</text>\n\t\t\t\t\t<text class=\"empty-text\">ËøòÊ≤°ÊúâÂä®ÊÄÅÔºåÂø´Êù•ÂàÜ‰∫´‰Ω†ÁöÑÂøÉÊÉÖÂêß</text>\n\t\t\t\t\t<button class=\"empty-btn\" @tap=\"goToPost\">ÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°Âä®ÊÄÅ</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { anonymousApi } from '../../utils/api.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tposts: [],\n\t\t\tloading: false,\n\t\t\tpage: 1,\n\t\t\thasMore: true\n\t\t}\n\t},\n\t\n\tonLoad() {\n\t\tthis.loadPosts()\n\t},\n\t\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\tgoToPost() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/anonymous/post'\n\t\t\t})\n\t\t},\n\t\t\n\t\tasync loadPosts() {\n\t\t\tif (this.loading) return\n\t\t\t\n\t\t\tthis.loading = true\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst res = await anonymousApi.getPosts()\n\t\t\t\t\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tthis.posts = res.data || []\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || 'Âä†ËΩΩÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\t\n\t\tloadMore() {\n\t\t\t// ÂèØ‰ª•Âú®ËøôÈáåÂÆûÁé∞ÂàÜÈ°µÂä†ËΩΩ\n\t\t\tconsole.log('Âä†ËΩΩÊõ¥Â§ö')\n\t\t},\n\t\t\n\t\tviewPost(postId) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/anonymous/detail?id=${postId}`\n\t\t\t})\n\t\t},\n\t\t\n\t\tasync likePost(postId) {\n\t\t\tif (!postId) {\n\t\t\t\tuni.showToast({ title: 'Êó†ÊïàÁöÑÂ∏ñÂ≠êID', icon: 'none' })\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst res = await anonymousApi.likePost(postId)\n\t\t\t\t\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tconst postIndex = this.posts.findIndex(post => post.id === postId)\n\t\t\t\t\tif (postIndex !== -1) {\n\t\t\t\t\t\tthis.posts[postIndex].isLiked = !this.posts[postIndex].isLiked\n\t\t\t\t\t\tthis.posts[postIndex].likeCount = this.posts[postIndex].isLiked ? (this.posts[postIndex].likeCount || 0) + 1 : (this.posts[postIndex].likeCount || 1) - 1\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: this.posts[postIndex].isLiked ? 'ÁÇπËµûÊàêÂäü' : 'ÂèñÊ∂àÁÇπËµû',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || 'Êìç‰ΩúÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\tcommentPost(postId) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/anonymous/detail?id=${postId}`\n\t\t\t})\n\t\t},\n\t\t\n\t\tformatTime(dateStr) {\n\t\t\tif (!dateStr) return ''\n\t\t\t\n\t\t\tconst date = new Date(dateStr)\n\t\t\tconst now = new Date()\n\t\t\tconst diff = now - date\n\t\t\tconst minutes = Math.floor(diff / (1000 * 60))\n\t\t\tconst hours = Math.floor(diff / (1000 * 60 * 60))\n\t\t\tconst days = Math.floor(diff / (1000 * 60 * 60 * 24))\n\t\t\t\n\t\t\tif (minutes < 1) return 'ÂàöÂàö'\n\t\t\tif (minutes < 60) return `${minutes}ÂàÜÈíüÂâç`\n\t\t\tif (hours < 24) return `${hours}Â∞èÊó∂Ââç`\n\t\t\tif (days < 7) return `${days}Â§©Ââç`\n\t\t\t\n\t\t\treturn date.toLocaleDateString()\n\t\t},\n\t\t\n\t\tgetRandomAvatar() {\n\t\t\tconst avatars = ['üë§', 'üëß', 'üë¶', 'üë©', 'üë®', 'üë±', 'üëµ', 'üë¥', 'üë∂', 'üë∑']\n\t\t\treturn avatars[Math.floor(Math.random() * avatars.length)]\n\t\t},\n\t\t\n\t\tgetRandomNickname() {\n\t\t\tconst nicknames = ['ÂåøÂêçÂ∞èÊòüÊòü', 'Â∞èÊòüÊòü', 'ÂåøÂêçÊòü', 'ÊòüÊòü', 'ÂåøÂêç', 'Êòü']\n\t\t\treturn nicknames[Math.floor(Math.random() * nicknames.length)]\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.anonymous-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n}\n\n/* ÁßªÈô§‰∫ÜÂØºËà™Ê†èÊ†∑Âºè */\n\n/* ÂÜÖÂÆπÂå∫Âüü */\n.content {\n\tpadding: 20rpx 40rpx;\n}\n\n/* ÂèëÂ∏ÉÂä®ÊÄÅÊåâÈíÆ */\n.post-section {\n\tpadding: 20rpx 0;\n\tmargin-bottom: 30rpx;\n}\n\n.post-action-btn {\n\twidth: 100%;\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n\tcolor: #ffffff;\n\tborder: none;\n\tborder-radius: 20rpx;\n\tpadding: 25rpx 40rpx;\n\tfont-size: 28rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 15rpx;\n\tbox-shadow: 0 6rpx 24rpx rgba(99, 102, 241, 0.3);\n\ttransition: all 0.3s ease;\n}\n\n.post-action-btn:active {\n\ttransform: translateY(2rpx);\n\tbox-shadow: 0 3rpx 12rpx rgba(99, 102, 241, 0.4);\n}\n\n.post-action-icon {\n\tfont-size: 28rpx;\n}\n\n.post-action-text {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n}\n\n/* Âä®ÊÄÅÂàóË°® */\n.posts-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.post-item {\n\tbackground: #ffffff;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n\ttransition: all 0.3s ease;\n}\n\n.post-item:active {\n\ttransform: translateY(2rpx);\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.12);\n}\n\n.post-header {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.post-avatar {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tbackground: #f3f4f6;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 2rpx solid rgba(99, 102, 241, 0.2);\n}\n\n.avatar-text {\n\tfont-size: 28rpx;\n\tcolor: #4a90e2;\n}\n\n.post-info {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5rpx;\n}\n\n.post-nickname {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #1f2937;\n}\n\n.post-time {\n\tfont-size: 22rpx;\n\tcolor: #9ca3af;\n}\n\n.post-content {\n\tmargin-bottom: 20rpx;\n}\n\n.post-text {\n\tfont-size: 28rpx;\n\tcolor: #374151;\n\tline-height: 1.5;\n}\n\n.post-footer {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n\n.post-actions {\n\tdisplay: flex;\n\tgap: 30rpx;\n}\n\n.action-item {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n\tpadding: 10rpx 16rpx;\n\tborder-radius: 20rpx;\n\tbackground: rgba(99, 102, 241, 0.05);\n\ttransition: all 0.3s ease;\n}\n\n.action-item:active {\n\tbackground: rgba(99, 102, 241, 0.1);\n\ttransform: scale(0.95);\n}\n\n.action-icon {\n\tfont-size: 24rpx;\n}\n\n.action-text {\n\tfont-size: 24rpx;\n\tcolor: #6b7280;\n\tfont-weight: 500;\n}\n\n/* Á©∫Áä∂ÊÄÅ */\n.empty-state {\n\ttext-align: center;\n\tpadding: 80rpx 40rpx;\n\tbackground: #ffffff;\n\tborder-radius: 20rpx;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n}\n\n.empty-icon {\n\tfont-size: 80rpx;\n\tmargin-bottom: 20rpx;\n\tdisplay: block;\n}\n\n.empty-text {\n\tfont-size: 28rpx;\n\tcolor: #6b7280;\n\tmargin-bottom: 30rpx;\n\tdisplay: block;\n}\n\n.empty-btn {\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n\tcolor: #ffffff;\n\tborder: none;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx 40rpx;\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tbox-shadow: 0 4rpx 16rpx rgba(99, 102, 241, 0.3);\n\ttransition: all 0.3s ease;\n}\n\n.empty-btn:active {\n\ttransform: translateY(2rpx);\n\tbox-shadow: 0 2rpx 8rpx rgba(99, 102, 241, 0.4);\n}\n</style>","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/anonymous/anonymous.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","anonymousApi"],"mappings":"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"}