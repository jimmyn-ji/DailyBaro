{"version":3,"file":"post.js","sources":["pages/anonymous/post.vue","pages/anonymous/post.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"post-container\">\n\t\t<view class=\"header\">\n\t\t\t<view class=\"back-btn\" @tap=\"goBack\">å–æ¶ˆ</view>\n\t\t\t<text class=\"title\">å‘å¸ƒåŠ¨æ€</text>\n\t\t\t<view class=\"publish-btn\" @tap=\"publishPost\">å‘å¸ƒ</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"form-container\">\n\t\t\t<view class=\"input-group\">\n\t\t\t\t<textarea \n\t\t\t\t\tclass=\"content-input\" \n\t\t\t\t\tplaceholder=\"è¯´ç‚¹ä»€ä¹ˆ...\" \n\t\t\t\t\tv-model=\"form.content\"\n\t\t\t\t\tmaxlength=\"500\"\n\t\t\t\t\tauto-height\n\t\t\t\t></textarea>\n\t\t\t\t<text class=\"char-count\">{{ form.content.length }}/500</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"visibility-section\">\n\t\t\t\t<view class=\"section-title\">å¯è§æ€§è®¾ç½®</view>\n\t\t\t\t<view class=\"visibility-options\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"visibility-item\" \n\t\t\t\t\t\t:class=\"{ active: form.visibility === 'public' }\"\n\t\t\t\t\t\t@tap=\"form.visibility = 'public'\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"visibility-icon\">ğŸŒ</text>\n\t\t\t\t\t\t<view class=\"visibility-info\">\n\t\t\t\t\t\t\t<text class=\"visibility-name\">å…¬å¼€</text>\n\t\t\t\t\t\t\t<text class=\"visibility-desc\">æ‰€æœ‰äººéƒ½å¯ä»¥çœ‹åˆ°</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"visibility-check\">{{ form.visibility === 'public' ? 'âœ“' : '' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"visibility-item\" \n\t\t\t\t\t\t:class=\"{ active: form.visibility === 'private' }\"\n\t\t\t\t\t\t@tap=\"form.visibility = 'private'\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"visibility-icon\">ğŸ”’</text>\n\t\t\t\t\t\t<view class=\"visibility-info\">\n\t\t\t\t\t\t\t<text class=\"visibility-name\">ä»…è‡ªå·±</text>\n\t\t\t\t\t\t\t<text class=\"visibility-desc\">åªæœ‰è‡ªå·±å¯ä»¥çœ‹åˆ°</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"visibility-check\">{{ form.visibility === 'private' ? 'âœ“' : '' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"tips-section\">\n\t\t\t\t<view class=\"tips-title\">ğŸ’¡ å°è´´å£«</view>\n\t\t\t\t<view class=\"tips-content\">\n\t\t\t\t\t<text class=\"tip-item\">â€¢ åœ¨è¿™é‡Œå¯ä»¥è‡ªç”±è¡¨è¾¾ï¼Œä¸ç”¨æ‹…å¿ƒè¢«è®¤å‡º</text>\n\t\t\t\t\t<text class=\"tip-item\">â€¢ å…¬å¼€çš„åŠ¨æ€ä¼šæ˜¾ç¤ºåœ¨åŒ¿åæ˜Ÿçƒä¸­</text>\n\t\t\t\t\t<text class=\"tip-item\">â€¢ ç§å¯†åŠ¨æ€åªæœ‰è‡ªå·±èƒ½çœ‹åˆ°</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { anonymousApi } from '@/utils/api.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tform: {\n\t\t\t\tcontent: '',\n\t\t\t\tvisibility: 'public'\n\t\t\t}\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\tasync publishPost() {\n\t\t\tif (!this.form.content.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥åŠ¨æ€å†…å®¹',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tif (this.form.content.length < 5) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'å†…å®¹è‡³å°‘5ä¸ªå­—ç¬¦',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst res = await anonymousApi.createPost(this.form)\n\t\t\t\t\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'å‘å¸ƒæˆåŠŸ',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t}, 1500)\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: res.message || 'å‘å¸ƒå¤±è´¥',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || 'å‘å¸ƒå¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.post-container {\n\tmin-height: 100vh;\n\tbackground: #f8fafc;\n}\n\n.header {\n\tbackground: #ffffff;\n\tpadding: 30rpx 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tborder-bottom: 1rpx solid #e2e8f0;\n}\n\n.back-btn {\n\tfont-size: 28rpx;\n\tcolor: #64748b;\n}\n\n.title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #1f2937;\n}\n\n.publish-btn {\n\tfont-size: 28rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 500;\n}\n\n.form-container {\n\tpadding: 40rpx;\n}\n\n.input-group {\n\tmargin-bottom: 40rpx;\n}\n\n.content-input {\n\twidth: 100%;\n\tmin-height: 200rpx;\n\tbackground: #ffffff;\n\tborder: 2rpx solid #e2e8f0;\n\tborder-radius: 16rpx;\n\tpadding: 30rpx;\n\tfont-size: 30rpx;\n\tcolor: #1f2937;\n\tline-height: 1.6;\n}\n\n.content-input:focus {\n\tborder-color: #4a90e2;\n}\n\n.char-count {\n\ttext-align: right;\n\tfont-size: 24rpx;\n\tcolor: #94a3b8;\n\tmargin-top: 15rpx;\n\tdisplay: block;\n}\n\n.visibility-section {\n\tmargin-bottom: 40rpx;\n}\n\n.section-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #1f2937;\n\tmargin-bottom: 20rpx;\n}\n\n.visibility-options {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 15rpx;\n}\n\n.visibility-item {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 25rpx;\n\tbackground: #ffffff;\n\tborder: 2rpx solid #e2e8f0;\n\tborder-radius: 16rpx;\n\ttransition: all 0.3s ease;\n}\n\n.visibility-item.active {\n\tborder-color: #4a90e2;\n\tbackground: #f0f9ff;\n}\n\n.visibility-icon {\n\tfont-size: 32rpx;\n\tmargin-right: 20rpx;\n}\n\n.visibility-info {\n\tflex: 1;\n}\n\n.visibility-name {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #1f2937;\n\tmargin-bottom: 5rpx;\n\tdisplay: block;\n}\n\n.visibility-desc {\n\tfont-size: 24rpx;\n\tcolor: #64748b;\n}\n\n.visibility-check {\n\tfont-size: 32rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 600;\n}\n\n.tips-section {\n\tbackground: #f0f9ff;\n\tborder-radius: 16rpx;\n\tpadding: 30rpx;\n\tborder-left: 4rpx solid #4a90e2;\n}\n\n.tips-title {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #1e40af;\n\tmargin-bottom: 15rpx;\n}\n\n.tips-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8rpx;\n}\n\n.tip-item {\n\tfont-size: 24rpx;\n\tcolor: #1e40af;\n\tline-height: 1.5;\n}\n</style>\n","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/anonymous/post.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","anonymousApi"],"mappings":";;;AAkEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,SAAS;AAAA,QACT,YAAY;AAAA,MACb;AAAA,IACD;AAAA,EACD;AAAA,EAEA,SAAS;AAAA,IACR,SAAS;AACRA,oBAAAA,MAAI,aAAY;AAAA,IACjB;AAAA,IAEA,MAAM,cAAc;AACnB,UAAI,CAAC,KAAK,KAAK,QAAQ,KAAI,GAAI;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI,KAAK,KAAK,QAAQ,SAAS,GAAG;AACjCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI;AACH,cAAM,MAAM,MAAMC,UAAAA,aAAa,WAAW,KAAK,IAAI;AAEnD,YAAI,IAAI,SAAS,KAAK;AACrBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAED,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,aAAY;AAAA,UACjB,GAAG,IAAI;AAAA,QACR,OAAO;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,WAAW;AAAA,YACtB,MAAM;AAAA,WACN;AAAA,QACF;AAAA,MACD,SAAS,OAAO;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,SACN;AAAA,MACF;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;AC3HA,GAAG,WAAW,eAAe;"}