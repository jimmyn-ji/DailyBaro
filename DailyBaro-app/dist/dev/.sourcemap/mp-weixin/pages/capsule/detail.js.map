{"version":3,"file":"detail.js","sources":["pages/capsule/detail.vue","pages/capsule/detail.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"detail-container\">\n\t\t<!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->\n\t\t<view class=\"custom-navbar\">\n\t\t\t<view class=\"navbar-left\" @click=\"goBack\">\n\t\t\t\t<text class=\"back-icon\">‚Üê</text>\n\t\t\t</view>\n\t\t\t<view class=\"navbar-title\">ËÉ∂ÂõäËØ¶ÊÉÖ</view>\n\t\t\t<view class=\"navbar-right\" @click=\"editCapsule\">\n\t\t\t\t<text class=\"edit-text\">ÁºñËæë</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- ÂÜÖÂÆπÂå∫Âüü -->\n\t\t<view class=\"content\">\n\t\t\t<!-- ËÉ∂Âõä‰ø°ÊÅØ -->\n\t\t\t<view class=\"capsule-info\">\n\t\t\t\t<view class=\"capsule-header\">\n\t\t\t\t\t<text class=\"capsule-title\">{{ capsule.title || 'Êú™ÂëΩÂêçËÉ∂Âõä' }}</text>\n\t\t\t\t\t<view class=\"capsule-status\" :class=\"getStatusClass(capsule.status)\">\n\t\t\t\t\t\t{{ getStatusText(capsule.status) }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"capsule-meta\">\n\t\t\t\t\t<text class=\"create-time\">ÂàõÂª∫Êó∂Èó¥Ôºö{{ formatDate(capsule.createTime) }}</text>\n\t\t\t\t\t<text class=\"open-time\" v-if=\"capsule.openTime\">ÂºÄÂêØÊó∂Èó¥Ôºö{{ formatDate(capsule.openTime) }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- ËÉ∂ÂõäÂÜÖÂÆπ -->\n\t\t\t<view class=\"capsule-content\">\n\t\t\t\t<view class=\"content-title\">ËÉ∂ÂõäÂÜÖÂÆπ</view>\n\t\t\t\t<view class=\"content-text\">{{ capsule.content || 'ÊöÇÊó†ÂÜÖÂÆπ' }}</view>\n\t\t\t</view>\n\n\t\t\t<!-- ÊÉÖÁª™Ê†áÁ≠æ -->\n\t\t\t<view class=\"emotion-tags\" v-if=\"capsule.emotions && capsule.emotions.length > 0\">\n\t\t\t\t<view class=\"tags-title\">ÊÉÖÁª™Ê†áÁ≠æ</view>\n\t\t\t\t<view class=\"tags-list\">\n\t\t\t\t\t<view class=\"tag\" v-for=\"emotion in capsule.emotions\" :key=\"emotion\">\n\t\t\t\t\t\t{{ emotion }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- ÈôÑ‰ª∂ -->\n\t\t\t<view class=\"attachments\" v-if=\"capsule.attachments && capsule.attachments.length > 0\">\n\t\t\t\t<view class=\"attachments-title\">ÈôÑ‰ª∂</view>\n\t\t\t\t<view class=\"attachments-list\">\n\t\t\t\t\t<view class=\"attachment\" v-for=\"(attachment, index) in capsule.attachments\" :key=\"index\">\n\t\t\t\t\t\t<image v-if=\"isImage(attachment)\" :src=\"attachment\" class=\"attachment-image\" mode=\"aspectFill\" @click=\"previewImage(attachment)\"></image>\n\t\t\t\t\t\t<view v-else class=\"attachment-file\" @click=\"downloadFile(attachment)\">\n\t\t\t\t\t\t\t<text class=\"file-icon\">üìé</text>\n\t\t\t\t\t\t\t<text class=\"file-name\">{{ getFileName(attachment) }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- Êìç‰ΩúÊåâÈíÆ -->\n\t\t\t<view class=\"action-buttons\">\n\t\t\t\t<button class=\"action-btn share-btn\" @click=\"shareCapsule\">ÂàÜ‰∫´</button>\n\t\t\t\t<button class=\"action-btn delete-btn\" @click=\"deleteCapsule\">Âà†Èô§</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcapsule: {},\n\t\t\tcapsuleId: null\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.capsuleId = options.id;\n\t\t\tthis.loadCapsuleDetail();\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\t// Âä†ËΩΩËÉ∂ÂõäËØ¶ÊÉÖ\n\t\tasync loadCapsuleDetail() {\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' });\n\t\t\t\t\n\t\t\t\t// Ê®°ÊãüAPIË∞ÉÁî®\n\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 1000));\n\t\t\t\t\n\t\t\t\t// Ê®°ÊãüÊï∞ÊçÆ\n\t\t\t\tthis.capsule = {\n\t\t\t\t\tid: this.capsuleId,\n\t\t\t\t\ttitle: 'ÊàëÁöÑÁ¨¨‰∏Ä‰∏™ËÉ∂Âõä',\n\t\t\t\t\tcontent: 'ËøôÊòØ‰∏Ä‰∏™ÂÖÖÊª°ÂõûÂøÜÁöÑËÉ∂ÂõäÔºåËÆ∞ÂΩï‰∫ÜÊàëÂΩìÊó∂ÁöÑÂøÉÊÉÖÂíåÊÉ≥Ê≥ï...',\n\t\t\t\t\tstatus: 'opened', // opened, sealed\n\t\t\t\t\tcreateTime: new Date().getTime() - 7 * 24 * 60 * 60 * 1000,\n\t\t\t\t\topenTime: new Date().getTime(),\n\t\t\t\t\temotions: ['ÂºÄÂøÉ', 'ÊøÄÂä®', 'ÊúüÂæÖ'],\n\t\t\t\t\tattachments: [\n\t\t\t\t\t\t'https://via.placeholder.com/300x200/FF6B6B/FFFFFF?text=Photo1',\n\t\t\t\t\t\t'https://via.placeholder.com/300x200/4ECDC4/FFFFFF?text=Photo2'\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tuni.hideLoading();\n\t\t\t} catch (error) {\n\t\t\t\tuni.hideLoading();\n\t\t\t\tuni.showToast({ title: 'Âä†ËΩΩÂ§±Ë¥•', icon: 'none' });\n\t\t\t\tconsole.error('Âä†ËΩΩËÉ∂ÂõäËØ¶ÊÉÖÂ§±Ë¥•:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// ËøîÂõû\n\t\tgoBack() {\n\t\t\tuni.navigateBack();\n\t\t},\n\t\t\n\t\t// ÁºñËæëËÉ∂Âõä\n\t\teditCapsule() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/capsule/edit?id=${this.capsuleId}`\n\t\t\t});\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÁä∂ÊÄÅÊ†∑Âºè\n\t\tgetStatusClass(status) {\n\t\t\treturn status === 'opened' ? 'status-opened' : 'status-sealed';\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÁä∂ÊÄÅÊñáÊú¨\n\t\tgetStatusText(status) {\n\t\t\treturn status === 'opened' ? 'Â∑≤ÂºÄÂêØ' : 'Êú™ÂºÄÂêØ';\n\t\t},\n\t\t\n\t\t// Ê†ºÂºèÂåñÊó•Êúü\n\t\tformatDate(timestamp) {\n\t\t\tif (!timestamp) return '';\n\t\t\tconst date = new Date(timestamp);\n\t\t\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n\t\t},\n\t\t\n\t\t// Âà§Êñ≠ÊòØÂê¶‰∏∫ÂõæÁâá\n\t\tisImage(url) {\n\t\t\treturn url && (url.includes('.jpg') || url.includes('.jpeg') || url.includes('.png') || url.includes('.gif'));\n\t\t},\n\t\t\n\t\t// È¢ÑËßàÂõæÁâá\n\t\tpreviewImage(url) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: this.capsule.attachments.filter(att => this.isImage(att)),\n\t\t\t\tcurrent: url\n\t\t\t});\n\t\t},\n\t\t\n\t\t// ‰∏ãËΩΩÊñá‰ª∂\n\t\tdownloadFile(url) {\n\t\t\tuni.downloadFile({\n\t\t\t\turl: url,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tuni.showToast({ title: '‰∏ãËΩΩÊàêÂäü', icon: 'success' });\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showToast({ title: '‰∏ãËΩΩÂ§±Ë¥•', icon: 'none' });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÊñá‰ª∂Âêç\n\t\tgetFileName(url) {\n\t\t\treturn url.split('/').pop() || 'Êú™Áü•Êñá‰ª∂';\n\t\t},\n\t\t\n\t\t// ÂàÜ‰∫´ËÉ∂Âõä\n\t\tshareCapsule() {\n\t\t\tuni.showToast({ title: 'ÂàÜ‰∫´ÂäüËÉΩÂºÄÂèë‰∏≠', icon: 'none' });\n\t\t},\n\t\t\n\t\t// Âà†Èô§ËÉ∂Âõä\n\t\tdeleteCapsule() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ËÉ∂ÂõäÂêóÔºüÂà†Èô§ÂêéÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.showToast({ title: 'Âà†Èô§ÊàêÂäü', icon: 'success' });\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.navigateBack();\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.detail-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n\tposition: relative;\n}\n\n.custom-navbar {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 20rpx 30rpx;\n\tbackground: rgba(255, 255, 255, 0.1);\n\tbackdrop-filter: blur(10px);\n}\n\n.navbar-left, .navbar-right {\n\twidth: 80rpx;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.back-icon {\n\tfont-size: 36rpx;\n\tcolor: #fff;\n}\n\n.navbar-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #fff;\n}\n\n.edit-text {\n\tfont-size: 28rpx;\n\tcolor: #fff;\n}\n\n.content {\n\tpadding: 30rpx;\n}\n\n.capsule-info {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.capsule-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 20rpx;\n}\n\n.capsule-title {\n\tfont-size: 36rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n}\n\n.capsule-status {\n\tpadding: 8rpx 20rpx;\n\tborder-radius: 20rpx;\n\tfont-size: 24rpx;\n\tcolor: #fff;\n}\n\n.status-opened {\n\tbackground: #4CAF50;\n}\n\n.status-sealed {\n\tbackground: #FF9800;\n}\n\n.capsule-meta {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10rpx;\n}\n\n.create-time, .open-time {\n\tfont-size: 26rpx;\n\tcolor: #666;\n}\n\n.capsule-content {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.content-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tmargin-bottom: 20rpx;\n}\n\n.content-text {\n\tfont-size: 28rpx;\n\tcolor: #666;\n\tline-height: 1.6;\n}\n\n.emotion-tags {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.tags-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tmargin-bottom: 20rpx;\n}\n\n.tags-list {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 15rpx;\n}\n\n.tag {\n\tpadding: 10rpx 20rpx;\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n\tcolor: #fff;\n\tborder-radius: 20rpx;\n\tfont-size: 24rpx;\n}\n\n.attachments {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.attachments-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333;\n\tmargin-bottom: 20rpx;\n}\n\n.attachments-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.attachment-image {\n\twidth: 100%;\n\theight: 300rpx;\n\tborder-radius: 15rpx;\n}\n\n.attachment-file {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 20rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 15rpx;\n}\n\n.file-icon {\n\tfont-size: 40rpx;\n\tmargin-right: 20rpx;\n}\n\n.file-name {\n\tfont-size: 28rpx;\n\tcolor: #333;\n}\n\n.action-buttons {\n\tdisplay: flex;\n\tgap: 30rpx;\n\tmargin-top: 40rpx;\n}\n\n.action-btn {\n\tflex: 1;\n\tpadding: 25rpx;\n\tborder-radius: 15rpx;\n\tfont-size: 28rpx;\n\tcolor: #fff;\n\tborder: none;\n}\n\n.share-btn {\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n}\n\n.delete-btn {\n\tbackground: linear-gradient(135deg, #ff6b6b, #ee5a52);\n}\n</style>\n","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/capsule/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}