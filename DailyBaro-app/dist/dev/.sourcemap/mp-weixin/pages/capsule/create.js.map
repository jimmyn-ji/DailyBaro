{"version":3,"file":"create.js","sources":["pages/capsule/create.vue","pages/capsule/create.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"create-container\">\n\t\t<!-- Ê∑ªÂä†È°∂ÈÉ®ÂØºËà™Ê†è -->\n\t\t<view class=\"nav-bar\">\n\t\t\t<view class=\"back-btn\" @tap=\"goBack\">\n\t\t\t\t<text class=\"back-icon\">‚Üê</text>\n\t\t\t</view>\n\t\t\t<text class=\"page-title\">{{ isEdit ? 'ÁºñËæëËÉ∂Âõä' : 'ÂàõÂª∫ËÉ∂Âõä' }}</text>\n\t\t\t<view class=\"placeholder\"></view>\n\t\t</view>\n\t\t\n\t\t<view class=\"content\">\n\t\t\t<!-- ËÉ∂ÂõäÂÜÖÂÆπËæìÂÖ• -->\n\t\t\t<view class=\"input-section\">\n\t\t\t\t<textarea \n\t\t\t\t\tclass=\"capsule-input\" \n\t\t\t\t\tplaceholder=\"ÂÜô‰∏ã‰Ω†Ê≠§ÂàªÁöÑÊÉ≥Ê≥ï„ÄÅÊÑüÂèóÊàñÁõÆÊ†á...\" \n\t\t\t\t\tv-model=\"capsuleContent\"\n\t\t\t\t\tmaxlength=\"500\"\n\t\t\t\t\tauto-height\n\t\t\t\t></textarea>\n\t\t\t\t<text class=\"char-count\">{{ capsuleContent.length }}/500</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ÂºÄÂêØÊó∂Èó¥ËÆæÁΩÆ -->\n\t\t\t<view class=\"time-section\">\n\t\t\t\t<view class=\"section-title\">ËÆæÁΩÆÂºÄÂêØÊó∂Èó¥</view>\n\t\t\t\t\n\t\t\t\t<view class=\"time-picker\">\n\t\t\t\t\t<view class=\"date-picker\">\n\t\t\t\t\t\t<text class=\"picker-label\">Êó•Êúü</text>\n\t\t\t\t\t\t<picker \n\t\t\t\t\t\t\tmode=\"date\" \n\t\t\t\t\t\t\t:value=\"openDate\" \n\t\t\t\t\t\t\t:start=\"minDate\"\n\t\t\t\t\t\t\t@change=\"onDateChange\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<view class=\"picker-field\">\n\t\t\t\t\t\t\t\t<text class=\"picker-text\">{{ openDate }}</text>\n\t\t\t\t\t\t\t\t<text class=\"picker-arrow\">‚Ä∫</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</picker>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"time-picker-row\">\n\t\t\t\t\t\t<view class=\"time-picker-item\">\n\t\t\t\t\t\t\t<text class=\"picker-label\">Â∞èÊó∂</text>\n\t\t\t\t\t\t\t<picker \n\t\t\t\t\t\t\t\tmode=\"selector\" \n\t\t\t\t\t\t\t\t:range=\"hours\" \n\t\t\t\t\t\t\t\t:value=\"selectedHour\"\n\t\t\t\t\t\t\t\t@change=\"onHourChange\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<view class=\"picker-field\">\n\t\t\t\t\t\t\t\t\t<text class=\"picker-text\">{{ selectedHour }}Êó∂</text>\n\t\t\t\t\t\t\t\t\t<text class=\"picker-arrow\">‚Ä∫</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"time-picker-item\">\n\t\t\t\t\t\t\t<text class=\"picker-label\">ÂàÜÈíü</text>\n\t\t\t\t\t\t\t<picker \n\t\t\t\t\t\t\t\tmode=\"selector\" \n\t\t\t\t\t\t\t\t:range=\"minutes\" \n\t\t\t\t\t\t\t\t:value=\"selectedMinute\"\n\t\t\t\t\t\t\t\t@change=\"onMinuteChange\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<view class=\"picker-field\">\n\t\t\t\t\t\t\t\t\t<text class=\"picker-text\">{{ selectedMinute }}ÂàÜ</text>\n\t\t\t\t\t\t\t\t\t<text class=\"picker-arrow\">‚Ä∫</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ÊèêÈÜíËÆæÁΩÆ -->\n\t\t\t<view class=\"reminder-section\">\n\t\t\t\t<view class=\"section-title\">ÂºÄÂêØÊèêÈÜí</view>\n\t\t\t\t<view class=\"reminder-options\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"reminder-item\"\n\t\t\t\t\t\t:class=\"{ active: enableReminder }\"\n\t\t\t\t\t\t@tap=\"toggleReminder\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"reminder-icon\">{{ enableReminder ? 'üîî' : 'üîï' }}</text>\n\t\t\t\t\t\t<text class=\"reminder-text\">Â∫îÁî®ÂÜÖÈÄöÁü•</text>\n\t\t\t\t\t\t<text class=\"reminder-status\">{{ enableReminder ? 'Â∑≤ÂºÄÂêØ' : 'Â∑≤ÂÖ≥Èó≠' }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- ÂàõÂª∫ÊåâÈíÆ -->\n\t\t\t<view class=\"action-section\">\n\t\t\t\t<button class=\"create-btn\" @tap=\"createCapsule\" :disabled=\"!canCreate\">\n\t\t\t\t\t{{ isEdit ? '‰øùÂ≠ò‰øÆÊîπ' : 'ÂàõÂª∫ËÉ∂Âõä' }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { capsuleApi } from '@/utils/api.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tcapsuleId: null,\n\t\t\tcapsuleContent: '',\n\t\t\topenDate: '',\n\t\t\tselectedHour: '09',\n\t\t\tselectedMinute: '00',\n\t\t\tenableReminder: true,\n\t\t\tminDate: new Date().toISOString().split('T')[0],\n\t\t\thours: Array.from({ length: 24 }, (_, i) => i),\n\t\t\tminutes: Array.from({ length: 60 }, (_, i) => i),\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.isEdit = true\n\t\t\tthis.capsuleId = options.id\n\t\t\tthis.loadCapsule()\n\t\t} else {\n\t\t\t// ÈªòËÆ§ËÆæÁΩÆ‰∏∫ÊòéÂ§©‰∏äÂçà9ÁÇπ\n\t\t\tconst tomorrow = new Date()\n\t\t\ttomorrow.setDate(tomorrow.getDate() + 1)\n\t\t\ttomorrow.setHours(9, 0, 0, 0)\n\t\t\t\n\t\t\tthis.openDate = tomorrow.toISOString().split('T')[0]\n\t\t\tthis.selectedHour = '09'\n\t\t\tthis.selectedMinute = '00'\n\t\t}\n\t},\n\t\n\tcomputed: {\n\t\tcanCreate() {\n\t\t\treturn this.capsuleContent && this.openDate && this.selectedHour && this.selectedMinute\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\tasync loadCapsule() {\n\t\t\ttry {\n\t\t\t\tconst res = await capsuleApi.getCapsuleDetail(this.capsuleId)\n\t\t\t\t\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tthis.capsuleContent = res.data.content || ''\n\t\t\t\t\tthis.openDate = res.data.openTime ? res.data.openTime.split('T')[0] : ''\n\t\t\t\t\tthis.selectedHour = res.data.openTime ? res.data.openTime.split('T')[1].substring(0, 2) : '09'\n\t\t\t\t\tthis.selectedMinute = res.data.openTime ? res.data.openTime.split('T')[1].substring(3, 5) : '00'\n\t\t\t\t\tthis.enableReminder = res.data.reminderType === 'app_notification'\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || 'Âä†ËΩΩÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\tonDateChange(e) {\n\t\t\tthis.openDate = e.detail.value\n\t\t},\n\t\t\n\t\tonHourChange(e) {\n\t\t\tthis.selectedHour = e.detail.value\n\t\t},\n\t\t\n\t\tonMinuteChange(e) {\n\t\t\tthis.selectedMinute = e.detail.value\n\t\t},\n\t\t\n\t\ttoggleReminder() {\n\t\t\tthis.enableReminder = !this.enableReminder\n\t\t},\n\t\t\n\t\tasync createCapsule() {\n\t\t\tif (!this.canCreate) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ÂÆåÂñÑ‰ø°ÊÅØ',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst data = {\n\t\t\t\t\tcontent: this.capsuleContent,\n\t\t\t\t\topenTime: this.openDate + 'T' + this.selectedHour + ':' + this.selectedMinute + ':00',\n\t\t\t\t\treminderType: this.enableReminder ? 'app_notification' : 'sms'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet res\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\tres = await capsuleApi.updateCapsule(this.capsuleId, data)\n\t\t\t\t} else {\n\t\t\t\t\tres = await capsuleApi.createCapsule(data)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (res.code === 200) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '‰øùÂ≠òÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t}, 1500)\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: res.message || '‰øùÂ≠òÂ§±Ë¥•',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '‰øùÂ≠òÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.create-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n}\n\n/* Ê∑ªÂä†ÂØºËà™Ê†èÊ†∑Âºè */\n.nav-bar {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tbackdrop-filter: blur(20rpx);\n\tpadding: 30rpx 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tborder-bottom: 1rpx solid rgba(226, 232, 240, 0.8);\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 100;\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.06);\n}\n\n.back-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 50%;\n\tbackground: rgba(99, 102, 241, 0.1);\n\ttransition: all 0.3s ease;\n}\n\n.back-btn:active {\n\tbackground: rgba(99, 102, 241, 0.2);\n\ttransform: scale(0.95);\n}\n\n.back-icon {\n\tfont-size: 36rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 600;\n}\n\n.page-title {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: #1f2937;\n}\n\n.placeholder {\n\twidth: 60rpx;\n}\n\n.content {\n\tpadding: 30rpx;\n\tpadding-bottom: 120rpx;\n}\n\n/* ËÉ∂ÂõäÂÜÖÂÆπËæìÂÖ• */\n.input-section {\n\tmargin-bottom: 30rpx;\n}\n\n.capsule-input {\n\twidth: 100%;\n\tmin-height: 200rpx;\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder: 1rpx solid rgba(255, 255, 255, 0.3);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tfont-size: 28rpx;\n\tline-height: 1.6;\n\tcolor: #1f2937;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.char-count {\n\ttext-align: right;\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n\tmargin-top: 10rpx;\n\tdisplay: block;\n}\n\n/* Êó∂Èó¥ËÆæÁΩÆ */\n.time-section {\n\tmargin-bottom: 30rpx;\n}\n\n.section-title {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: #ffffff;\n\tmargin-bottom: 20rpx;\n\ttext-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.3);\n}\n\n.time-picker {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.date-picker {\n\tmargin-bottom: 25rpx;\n}\n\n.picker-label {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #1f2937;\n\tmargin-bottom: 15rpx;\n\tdisplay: block;\n}\n\n.picker-field {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tbackground: #f9fafb;\n\tborder: 1rpx solid #e5e7eb;\n\tborder-radius: 12rpx;\n\tpadding: 20rpx;\n}\n\n.picker-text {\n\tfont-size: 26rpx;\n\tcolor: #1f2937;\n}\n\n.picker-arrow {\n\tfont-size: 24rpx;\n\tcolor: #9ca3af;\n}\n\n.time-picker-row {\n\tdisplay: flex;\n\tgap: 20rpx;\n}\n\n.time-picker-item {\n\tflex: 1;\n}\n\n/* ÊèêÈÜíËÆæÁΩÆ */\n.reminder-section {\n\tmargin-bottom: 30rpx;\n}\n\n.reminder-options {\n\tbackground: rgba(255, 255, 255, 0.95);\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.reminder-item {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 20rpx;\n\tbackground: #f9fafb;\n\tborder-radius: 16rpx;\n\tborder: 2rpx solid transparent;\n\ttransition: all 0.3s ease;\n}\n\n.reminder-item.active {\n\tbackground: #e0f2fe;\n\tborder-color: #0ea5e9;\n}\n\n.reminder-icon {\n\tfont-size: 32rpx;\n\tmargin-right: 15rpx;\n}\n\n.reminder-text {\n\tflex: 1;\n\tfont-size: 26rpx;\n\tcolor: #1f2937;\n\tfont-weight: 500;\n}\n\n.reminder-status {\n\tfont-size: 22rpx;\n\tcolor: #64748b;\n}\n\n/* Êìç‰ΩúÊåâÈíÆ */\n.action-section {\n\tmargin-bottom: 30rpx;\n}\n\n.create-btn {\n\twidth: 100%;\n\tbackground: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n\tcolor: #ffffff;\n\tborder: none;\n\tborder-radius: 16rpx;\n\tpadding: 25rpx;\n\tfont-size: 30rpx;\n\tfont-weight: 600;\n\tbox-shadow: 0 4rpx 16rpx rgba(245, 158, 11, 0.3);\n\ttransition: all 0.3s ease;\n}\n\n.create-btn:active {\n\ttransform: translateY(2rpx);\n\tbox-shadow: 0 2rpx 8rpx rgba(245, 158, 11, 0.4);\n}\n\n.create-btn:disabled {\n\tbackground: #9ca3af;\n\tbox-shadow: none;\n}\n</style>","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/capsule/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","capsuleApi"],"mappings":"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"}