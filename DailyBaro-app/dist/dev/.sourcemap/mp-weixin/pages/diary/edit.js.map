{"version":3,"file":"edit.js","sources":["pages/diary/edit.vue","pages/diary/edit.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"edit-container\">\n\t\t<!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\n\t\t<view class=\"nav-bar\">\n\t\t\t<!-- ‰øÆÊîπÂêéÁöÑËøîÂõûÊåâÈíÆ -->\n\t\t\t<view class=\"back-btn\" @tap=\"goBack\">\n\t\t\t\t<text class=\"back-icon\">‚Üê</text>\n\t\t\t</view>\n\t\t\t<text class=\"page-title\">{{ isEdit ? 'ÁºñËæëÊó•ËÆ∞' : 'ÂÜôÊó•ËÆ∞' }}</text>\n\t\t\t<view class=\"placeholder\"></view> <!-- Áî®‰∫é‰øùÊåÅÂ∏ÉÂ±ÄÂπ≥Ë°° -->\n\t\t</view>\n\t\t\n\t\t<view class=\"content\">\n\t\t\t<!-- Êó•ËÆ∞ÂÜÖÂÆπËæìÂÖ• -->\n\t\t\t<view class=\"input-section\">\n\t\t\t<textarea \n\t\t\t\tclass=\"diary-input\" \n\t\t\t\tplaceholder=\"ÂÜô‰∏ã‰ªäÂ§©ÁöÑÂøÉÊÉÖÂíåÊÉ≥Ê≥ï...\" \n\t\t\t\tv-model=\"diaryContent\"\n\t\t\t\t@input=\"onContentInput\"\n\t\t\t\tmaxlength=\"1000\"\n\t\t\t\tauto-height\n\t\t\t></textarea>\n\t\t\t\t<text class=\"char-count\">{{ diaryContent.length }}/1000</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- Êó•ËÆ∞ËÆæÁΩÆ -->\n\t\t\t<view class=\"settings-section\">\n\t\t\t\t<view class=\"setting-item\">\n\t\t\t\t\t<text class=\"setting-label\">Êó•Êúü</text>\n\t\t\t\t\t<picker \n\t\t\t\t\t\tmode=\"date\" \n\t\t\t\t\t\t:value=\"diaryDate\" \n\t\t\t\t\t\t@change=\"onDateChange\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<view class=\"picker-field\">\n\t\t\t\t\t\t\t<text class=\"picker-text\">{{ diaryDate }}</text>\n\t\t\t\t\t\t\t<text class=\"picker-arrow\">‚Ä∫</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</picker>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"setting-item emotion-setting-item\">\n\t\t\t\t\t<text class=\"setting-label\">ÊÉÖÁª™Ê†áÁ≠æ</text>\n\t\t\t\t\t<view class=\"emotion-section\">\n\t\t\t\t\t\t<!-- ÊòæÁ§∫ÂΩìÂâçËØÜÂà´ÁöÑÊÉÖÁª™ -->\n\t\t\t\t\t\t<view class=\"emotion-display\">\n\t\t\t\t\t\t\t<text class=\"emotion-tag\">{{ selectedEmotion || 'Á≠âÂæÖËØÜÂà´...' }}</text>\n\t\t\t\t\t\t\t<text v-if=\"analyzing\" class=\"analyzing-text\">ËØÜÂà´‰∏≠...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- Â§öÊ®°ÊÄÅÊÉÖÁª™ÂàÜÊûê - ÂçïÁã¨‰∏ÄË°å -->\n\t\t\t\t<view class=\"setting-item multimodal-setting-item\">\n\t\t\t\t\t<text class=\"setting-label\">Â§öÊ®°ÊÄÅÊÉÖÁª™ÂàÜÊûê</text>\n\t\t\t\t\t<view class=\"multimodal-section\">\n\t\t\t\t\t\t<!-- Âè™ÊúâÂΩìÊ≤°ÊúâÈÄâÊã©‰ªª‰ΩïÈôÑ‰ª∂Êó∂ÊâçÊòæÁ§∫ÊåâÈíÆ -->\n\t\t\t\t\t\t<view class=\"multimodal-buttons\" v-if=\"!selectedImage && !selectedAudio\">\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tclass=\"multimodal-btn cv-btn\" \n\t\t\t\t\t\t\t\t@tap=\"chooseImageForAnalysis\"\n\t\t\t\t\t\t\t\t:disabled=\"analyzing\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text class=\"btn-icon\">üì∑</text>\n\t\t\t\t\t\t\t\t<text class=\"btn-text\">ÂõæÂÉèÂàÜÊûê</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tclass=\"multimodal-btn audio-btn\" \n\t\t\t\t\t\t\t\t@tap=\"chooseAudioForAnalysis\"\n\t\t\t\t\t\t\t\t:disabled=\"analyzing\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text class=\"btn-icon\">üéµ</text>\n\t\t\t\t\t\t\t\t<text class=\"btn-text\">Èü≥È¢ëÂàÜÊûê</text>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- ÂõæÂÉèÈ¢ÑËßà -->\n\t\t\t\t\t\t<view v-if=\"selectedImage\" class=\"image-preview-section\">\n\t\t\t\t\t\t\t<view class=\"image-preview-header\">\n\t\t\t\t\t\t\t\t<text class=\"preview-title\">Â∑≤ÈÄâÊã©ÂõæÁâá</text>\n\t\t\t\t\t\t\t\t<text class=\"preview-actions\">\n\t\t\t\t\t\t\t\t\t<text class=\"action-link\" @tap=\"chooseImageForAnalysis\">ÈáçÊñ∞ÈÄâÊã©</text>\n\t\t\t\t\t\t\t\t\t<text class=\"action-link delete\" @tap=\"removeSelectedImage\">Âà†Èô§</text>\n\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<image :src=\"selectedImage\" class=\"preview-image\" mode=\"aspectFit\"></image>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tclass=\"analyze-image-btn\" \n\t\t\t\t\t\t\t\t@tap=\"analyzeImageEmotion\"\n\t\t\t\t\t\t\t\t:loading=\"analyzingImage\"\n\t\t\t\t\t\t\t\t:disabled=\"analyzingImage\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ analyzingImage ? 'ÂàÜÊûê‰∏≠...' : 'ÂàÜÊûêÂõæÁâáÊÉÖÁª™' }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- Èü≥È¢ëÈ¢ÑËßà -->\n\t\t\t\t\t\t<view v-if=\"selectedAudio\" class=\"audio-preview-section\">\n\t\t\t\t\t\t\t<view class=\"audio-preview-header\">\n\t\t\t\t\t\t\t\t<text class=\"preview-title\">Â∑≤ÈÄâÊã©Èü≥È¢ë</text>\n\t\t\t\t\t\t\t\t<text class=\"preview-actions\">\n\t\t\t\t\t\t\t\t\t<text class=\"action-link\" @tap=\"chooseAudioForAnalysis\">ÈáçÊñ∞ÈÄâÊã©</text>\n\t\t\t\t\t\t\t\t\t<text class=\"action-link delete\" @tap=\"removeSelectedAudio\">Âà†Èô§</text>\n\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"audio-info\">\n\t\t\t\t\t\t\t\t<text class=\"audio-name\">{{ selectedAudio.name }}</text>\n\t\t\t\t\t\t\t\t<text class=\"audio-size\">{{ formatFileSize(selectedAudio.size) }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tclass=\"analyze-audio-btn\" \n\t\t\t\t\t\t\t\t@tap=\"analyzeAudioEmotion\"\n\t\t\t\t\t\t\t\t:loading=\"analyzingAudio\"\n\t\t\t\t\t\t\t\t:disabled=\"analyzingAudio\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ analyzingAudio ? 'ÂàÜÊûê‰∏≠...' : 'ÂàÜÊûêÈü≥È¢ëÊÉÖÁª™' }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- Â§öÊ®°ÊÄÅÂàÜÊûêÁªìÊûú -->\n\t\t\t\t\t\t<view v-if=\"multimodalResult\" class=\"multimodal-result\">\n\t\t\t\t\t\t\t<view class=\"result-header\">\n\t\t\t\t\t\t\t\t<text class=\"result-title\">Â§öÊ®°ÊÄÅÊÉÖÁª™ÂàÜÊûê</text>\n\t\t\t\t\t\t\t\t<text class=\"close-btn\" @tap=\"closeMultimodalResult\">√ó</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"result-content\">\n\t\t\t\t\t\t\t\t<view v-if=\"multimodalResult.text\" class=\"result-item\">\n\t\t\t\t\t\t\t\t\t<text class=\"result-label\">ÊñáÊú¨ÊÉÖÁª™Ôºö</text>\n\t\t\t\t\t\t\t\t\t<text class=\"result-value\">{{ multimodalResult.text.emotion }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"multimodalResult.image\" class=\"result-item\">\n\t\t\t\t\t\t\t\t\t<text class=\"result-label\">ÂõæÂÉèÊÉÖÁª™Ôºö</text>\n\t\t\t\t\t\t\t\t\t<text class=\"result-value\">{{ multimodalResult.image.emotion }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"multimodalResult.audio\" class=\"result-item\">\n\t\t\t\t\t\t\t\t\t<text class=\"result-label\">Èü≥È¢ëÊÉÖÁª™Ôºö</text>\n\t\t\t\t\t\t\t\t\t<text class=\"result-value\">{{ multimodalResult.audio.emotion }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"multimodalResult.fused\" class=\"result-item\">\n\t\t\t\t\t\t\t\t\t<text class=\"result-label\">ËûçÂêàÊÉÖÁª™Ôºö</text>\n\t\t\t\t\t\t\t\t\t<text class=\"result-value\">{{ multimodalResult.fused.emotion }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- Êìç‰ΩúÊåâÈíÆ -->\n\t\t\t<view class=\"action-section\">\n\t\t\t\t<button class=\"draft-btn\" @tap=\"saveAsDraft\">‰øùÂ≠òËçâÁ®ø</button>\n\t\t\t\t<button class=\"publish-btn\" @tap=\"publishDiary\">ÂèëÂ∏ÉÊó•ËÆ∞</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport { diaryApi, fileApi } from '../../utils/api.js'\nimport { formatDateToStandard } from '../../utils/dateUtils.js'\nimport { config } from '../../utils/config.js'\n\nexport default {\n\t\tdata() {\n\t\treturn {\n\t\t\tdiaryContent: '',\n\t\t\tdiaryDate: '',\n\t\t\temotionTags: ['ÂºÄÂøÉ', 'Âπ≥Èùô', 'ÂÖ¥Â•ã', 'ÁÑ¶Ëôë', 'ÊÇ≤‰º§', 'ÊÑ§ÊÄí', 'Âõ∞ÊÉë', 'Êª°Ë∂≥', 'ÊîæÊùæ', 'Á¥ßÂº†', 'ÊúüÂæÖ', '‰ø°‰ªª', 'Ê∂àÊûÅ', 'ÁßØÊûÅ', '‰∏≠ÊÄß'],\n\t\t\tselectedEmotion: 'Á≠âÂæÖËØÜÂà´...', // Ëá™Âä®ËØÜÂà´ÁöÑÊÉÖÁª™Ê†áÁ≠æ\n\t\t\tisEdit: false,\n\t\t\tdiaryId: null,\n\t\t\tanalyzing: false,\n\t\t\temotionResult: null,\n\t\t\tselectedImage: null,\n\t\t\tselectedAudio: null,\n\t\t\tselectedVideo: null,\n\t\t\tanalyzingImage: false,\n\t\t\tanalyzingAudio: false,\n\t\t\tmultimodalResult: null,\n\t\t\tautoAnalyzeTimer: null // Ëá™Âä®ÂàÜÊûêÂÆöÊó∂Âô®ÔºàÈò≤ÊäñÔºâ\n\t\t}\n\t},\n\t\n\tonLoad(options) {\n\t\tconsole.log('ÁºñËæëÈ°µÈù¢ÂèÇÊï∞:', options)\n\t\tthis.initPage(options)\n\t},\n\t\n\tmethods: {\n\t\t// Ëé∑ÂèñÂü∫Á°ÄURL\n\t\tgetBaseUrl() {\n\t\t\t// ‰ΩøÁî®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑBASE_URL\n\t\t\treturn config.BASE_URL || 'https://dailybaro.cn'\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÂÆåÊï¥URLÔºàÂ§ÑÁêÜÁõ∏ÂØπË∑ØÂæÑÔºâ\n\t\tgetFullUrl(url) {\n\t\t\tif (!url) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\t\n\t\t\t// Â¶ÇÊûúÂ∑≤ÁªèÊòØÂÆåÊï¥URLÔºåÁõ¥Êé•ËøîÂõû\n\t\t\tif (url.startsWith('http://') || url.startsWith('https://')) {\n\t\t\t\treturn url\n\t\t\t}\n\t\t\t\n\t\t\t// Â§ÑÁêÜÂâçÁ´ØÈùôÊÄÅËµÑÊ∫êË∑ØÂæÑ\n\t\t\tif (url.startsWith('/src/static/') || url.startsWith('src/static/')) {\n\t\t\t\tconst filePath = url.replace(/^\\/?src\\/static\\//, '/api/uploads/static/')\n\t\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\t\treturn baseUrl + filePath\n\t\t\t}\n\t\t\t\n\t\t\t// Â§ÑÁêÜ‰∏ä‰º†Êñá‰ª∂ÁöÑË∑ØÂæÑ\n\t\t\t// Ê†πÊçÆÁΩëÂÖ≥ÈÖçÁΩÆÔºåÊñá‰ª∂ËÆøÈóÆË∑ØÂæÑÂ∫îËØ•ÊòØ /api/uploads/ Êàñ /uploads/\n\t\t\t// ‰ºòÂÖà‰ΩøÁî® /api/uploads/ Ë∑ØÂæÑ\n\t\t\tlet filePath = url\n\t\t\tif (url.startsWith('/api/uploads/')) {\n\t\t\t\tfilePath = url\n\t\t\t} else if (url.startsWith('/uploads/')) {\n\t\t\t\t// Â¶ÇÊûúÂ∑≤ÁªèÊòØ /uploads/ÔºåÂ∞ùËØï‰ΩøÁî® /api/uploads/ Ë∑ØÂæÑ\n\t\t\t\tfilePath = '/api/uploads/' + url.substring('/uploads/'.length)\n\t\t\t} else if (url.startsWith('uploads/')) {\n\t\t\t\tfilePath = '/api/uploads/' + url.substring('uploads/'.length)\n\t\t\t} else if (!url.startsWith('/api/') && !url.startsWith('http') && !url.startsWith('/')) {\n\t\t\t\tfilePath = '/api/uploads/' + url\n\t\t\t} else if (url.startsWith('/') && !url.startsWith('/api/') && !url.startsWith('/uploads/')) {\n\t\t\t\tfilePath = '/api/uploads' + url\n\t\t\t}\n\t\t\t\n\t\t\t// ‰ΩøÁî®ÈÖçÁΩÆÁöÑBASE_URL\n\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\tconst fullUrl = baseUrl + filePath\n\t\t\tconsole.log('edit.vue getFullUrl: ÊãºÊé•URL:', url, '->', fullUrl)\n\t\t\treturn fullUrl\n\t\t},\n\t\t\n\t\tinitPage(options) {\n\t\t\t// ËÆæÁΩÆÂΩìÂâçÊó•Êúü\n\t\t\tconst today = new Date()\n\t\t\tthis.diaryDate = today.toISOString().split('T')[0]\n\t\t\t\n\t\t\t// Ê£ÄÊü•ÊòØÂê¶ÊòØÁºñËæëÊ®°Âºè\n\t\t\tif (options && options.id) {\n\t\t\t\tthis.isEdit = true\n\t\t\t\tthis.diaryId = options.id\n\t\t\t\tconsole.log('ÁºñËæëÊ®°ÂºèÔºåÊó•ËÆ∞ID:', this.diaryId)\n\t\t\t\tthis.loadDiaryData()\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync loadDiaryData() {\n\t\t\ttry {\n\t\t\t\tconst response = await diaryApi.getDiaryDetail(this.diaryId)\n\t\t\t\tif (response && response.code === 200) {\n\t\t\t\t\tconst diary = response.data\n\t\t\t\t\tthis.diaryContent = diary.content || ''\n\t\t\t\t\t\n\t\t\t\t\t// Â§ÑÁêÜÊó•ÊúüÊ†ºÂºè\n\t\t\t\t\tif (diary.createTime) {\n\t\t\t\t\t\tconst dateStr = formatDateToStandard(diary.createTime)\n\t\t\t\t\t\tif (dateStr) {\n\t\t\t\t\t\t\tthis.diaryDate = dateStr\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Â§ÑÁêÜÊÉÖÁª™Ê†áÁ≠æÔºàÁõ¥Êé•‰ΩøÁî®Êó•ËÆ∞‰∏≠ÁöÑÊÉÖÁª™Ôºâ\n\t\t\t\t\tthis.selectedEmotion = diary.emotion || 'Á≠âÂæÖËØÜÂà´...'\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Âä†ËΩΩÊó•ËÆ∞Êï∞ÊçÆÂ§±Ë¥•:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Âä†ËΩΩÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\tonDateChange(e) {\n\t\t\tthis.diaryDate = e.detail.value\n\t\t},\n\t\t\n\t\t// ÊñáÊú¨ËæìÂÖ•ÁõëÂê¨ÔºàËá™Âä®ÊÉÖÁª™ËØÜÂà´Ôºâ\n\t\tonContentInput(e) {\n\t\t\tthis.diaryContent = e.detail.value\n\t\t\t// Èò≤ÊäñÔºöÂª∂Ëøü1ÁßíÂêéËá™Âä®ËØÜÂà´ÊÉÖÁª™\n\t\t\tif (this.autoAnalyzeTimer) {\n\t\t\t\tclearTimeout(this.autoAnalyzeTimer)\n\t\t\t}\n\t\t\t\n\t\t\t// Â¶ÇÊûúÂÜÖÂÆπÂ∞ë‰∫é10‰∏™Â≠óÔºå‰∏çËØÜÂà´\n\t\t\tif (!this.diaryContent || this.diaryContent.trim().length < 10) {\n\t\t\t\tthis.selectedEmotion = 'Á≠âÂæÖËØÜÂà´...'\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// Âª∂Ëøü1ÁßíÂêéËá™Âä®ËØÜÂà´\n\t\t\tthis.autoAnalyzeTimer = setTimeout(() => {\n\t\t\t\tthis.autoAnalyzeEmotion()\n\t\t\t}, 1000)\n\t\t},\n\t\t\n\t\t// Ëá™Âä®ÊÉÖÁª™ËØÜÂà´ÔºàÊñáÊú¨Ôºâ\n\t\tasync autoAnalyzeEmotion() {\n\t\t\tif (!this.diaryContent || this.diaryContent.trim().length < 10) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.analyzing = true\n\t\t\ttry {\n\t\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\t\t\tconst uid = userInfo ? userInfo.uid : ''\n\t\t\t\t\n\t\t\t\tif (!uid) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst response = await uni.request({\n\t\t\t\t\turl: baseUrl + '/app/emotion/analysis',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'uid': uid\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttext: this.diaryContent\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (response.data && response.data.code === 200) {\n\t\t\t\t\tconst data = response.data.data\n\t\t\t\t\t// ÊîØÊåÅÂ§öÁßçÂèØËÉΩÁöÑÂ≠óÊÆµÂêç\n\t\t\t\t\tconst emotion = data?.emotion || data?.primaryEmotion || data?.label\n\t\t\t\t\tif (emotion) {\n\t\t\t\t\t\t// Êò†Â∞ÑÊÉÖÁª™Âà∞Ê†áÁ≠æ\n\t\t\t\t\t\tconst mappedEmotion = this.mapEmotionToTag(emotion)\n\t\t\t\t\t\tthis.selectedEmotion = mappedEmotion\n\t\t\t\t\t\tthis.emotionResult = data\n\t\t\t\t\t\tconsole.log('ÊÉÖÁª™ËØÜÂà´ÊàêÂäü:', { ÂéüÂßã: emotion, Êò†Â∞ÑÂêé: mappedEmotion, ÂÆåÊï¥Êï∞ÊçÆ: data })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('ÊÉÖÁª™ËØÜÂà´ÂìçÂ∫î‰∏≠Êú™ÊâæÂà∞ÊÉÖÁª™Â≠óÊÆµ:', data)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('ÊÉÖÁª™ËØÜÂà´Â§±Ë¥•:', response.data)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Ëá™Âä®ÊÉÖÁª™ËØÜÂà´Â§±Ë¥•:', error)\n\t\t\t} finally {\n\t\t\t\tthis.analyzing = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// Êò†Â∞ÑÂêéÁ´ØËøîÂõûÁöÑÊÉÖÁª™Âà∞ÂâçÁ´ØÊ†áÁ≠æ\n\t\tmapEmotionToTag(emotion) {\n\t\t\tif (!emotion) return 'Á≠âÂæÖËØÜÂà´...'\n\t\t\t\n\t\t\t// Áªü‰∏ÄËΩ¨Êç¢‰∏∫Â∞èÂÜôËøõË°åÂåπÈÖç\n\t\t\tconst emotionLower = emotion.toLowerCase().trim()\n\t\t\t\n\t\t\t// ÊÉÖÁª™Êò†Â∞ÑË°®ÔºàÂåÖÂê´‰∏≠Ëã±Êñá„ÄÅÂêå‰πâËØçÔºâ\n\t\t\tconst emotionMap = {\n\t\t\t\t// ÁßØÊûÅÊÉÖÁª™\n\t\t\t\t'ÂºÄÂøÉ': 'ÂºÄÂøÉ',\n\t\t\t\t'Âø´‰πê': 'ÂºÄÂøÉ',\n\t\t\t\t'È´òÂÖ¥': 'ÂºÄÂøÉ',\n\t\t\t\t'ÊÑâÂø´': 'ÂºÄÂøÉ',\n\t\t\t\t'positive': 'ÂºÄÂøÉ',\n\t\t\t\t'ÁßØÊûÅ': 'ÂºÄÂøÉ',\n\t\t\t\t'happy': 'ÂºÄÂøÉ',\n\t\t\t\t'joy': 'ÂºÄÂøÉ',\n\t\t\t\t'joyful': 'ÂºÄÂøÉ',\n\t\t\t\t\n\t\t\t\t// ‰∏≠ÊÄßÊÉÖÁª™\n\t\t\t\t'Âπ≥Èùô': 'Âπ≥Èùô',\n\t\t\t\t'ÂÜ∑Èùô': 'Âπ≥Èùô',\n\t\t\t\t'Âπ≥Âíå': 'Âπ≥Èùô',\n\t\t\t\t'neutral': 'Âπ≥Èùô',\n\t\t\t\t'‰∏≠ÊÄß': 'Âπ≥Èùô',\n\t\t\t\t'calm': 'Âπ≥Èùô',\n\t\t\t\t'peaceful': 'Âπ≥Èùô',\n\t\t\t\t\n\t\t\t\t// ÂÖ¥Â•ãÊÉÖÁª™\n\t\t\t\t'ÂÖ¥Â•ã': 'ÂÖ¥Â•ã',\n\t\t\t\t'ÊøÄÂä®': 'ÂÖ¥Â•ã',\n\t\t\t\t'excited': 'ÂÖ¥Â•ã',\n\t\t\t\t'excitement': 'ÂÖ¥Â•ã',\n\t\t\t\t\n\t\t\t\t// ÁÑ¶ËôëÊÉÖÁª™\n\t\t\t\t'ÁÑ¶Ëôë': 'ÁÑ¶Ëôë',\n\t\t\t\t'ÊãÖÂøÉ': 'ÁÑ¶Ëôë',\n\t\t\t\t'‰∏çÂÆâ': 'ÁÑ¶Ëôë',\n\t\t\t\t'anxious': 'ÁÑ¶Ëôë',\n\t\t\t\t'anxiety': 'ÁÑ¶Ëôë',\n\t\t\t\t'worried': 'ÁÑ¶Ëôë',\n\t\t\t\t\n\t\t\t\t// Á¥ßÂº†ÊÉÖÁª™\n\t\t\t\t'Á¥ßÂº†': 'Á¥ßÂº†',\n\t\t\t\t'nervous': 'Á¥ßÂº†',\n\t\t\t\t'tense': 'Á¥ßÂº†',\n\t\t\t\t\n\t\t\t\t// Ê∂àÊûÅÊÉÖÁª™\n\t\t\t\t'ÊÇ≤‰º§': 'ÊÇ≤‰º§',\n\t\t\t\t'ÈöæËøá': 'ÊÇ≤‰º§',\n\t\t\t\t'‰º§ÂøÉ': 'ÊÇ≤‰º§',\n\t\t\t\t'negative': 'ÊÇ≤‰º§',\n\t\t\t\t'Ê∂àÊûÅ': 'ÊÇ≤‰º§',\n\t\t\t\t'sad': 'ÊÇ≤‰º§',\n\t\t\t\t'sadness': 'ÊÇ≤‰º§',\n\t\t\t\t'depressed': 'ÊÇ≤‰º§',\n\t\t\t\t\n\t\t\t\t// ÊÑ§ÊÄíÊÉÖÁª™\n\t\t\t\t'ÊÑ§ÊÄí': 'ÊÑ§ÊÄí',\n\t\t\t\t'ÁîüÊ∞î': 'ÊÑ§ÊÄí',\n\t\t\t\t'angry': 'ÊÑ§ÊÄí',\n\t\t\t\t'anger': 'ÊÑ§ÊÄí',\n\t\t\t\t'mad': 'ÊÑ§ÊÄí',\n\t\t\t\t\n\t\t\t\t// ÂÖ∂‰ªñÊÉÖÁª™\n\t\t\t\t'Âõ∞ÊÉë': 'Âõ∞ÊÉë',\n\t\t\t\t'confused': 'Âõ∞ÊÉë',\n\t\t\t\t'confusion': 'Âõ∞ÊÉë',\n\t\t\t\t'Êª°Ë∂≥': 'Êª°Ë∂≥',\n\t\t\t\t'satisfied': 'Êª°Ë∂≥',\n\t\t\t\t'satisfaction': 'Êª°Ë∂≥',\n\t\t\t\t'ÊîæÊùæ': 'ÊîæÊùæ',\n\t\t\t\t'relaxed': 'ÊîæÊùæ',\n\t\t\t\t'relaxation': 'ÊîæÊùæ',\n\t\t\t\t'ÊúüÂæÖ': 'ÊúüÂæÖ',\n\t\t\t\t'expectation': 'ÊúüÂæÖ',\n\t\t\t\t'‰ø°‰ªª': '‰ø°‰ªª',\n\t\t\t\t'trust': '‰ø°‰ªª',\n\t\t\t\t'Áñ≤ÊÉ´': 'Áñ≤ÊÉ´',\n\t\t\t\t'tired': 'Áñ≤ÊÉ´',\n\t\t\t\t'exhausted': 'Áñ≤ÊÉ´'\n\t\t\t}\n\t\t\t\n\t\t\t// 1. Áõ¥Êé•ÂåπÈÖçÔºà‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºâ\n\t\t\tconst directMatch = emotionMap[emotion] || emotionMap[emotionLower]\n\t\t\tif (directMatch) {\n\t\t\t\treturn directMatch\n\t\t\t}\n\t\t\t\n\t\t\t// 2. ÂåÖÂê´ÂåπÈÖçÔºàÊ£ÄÊü•ÊÉÖÁª™Â≠óÁ¨¶‰∏≤ÊòØÂê¶ÂåÖÂê´ÂÖ≥ÈîÆËØçÔºâ\n\t\t\tfor (const [key, value] of Object.entries(emotionMap)) {\n\t\t\t\tif (emotionLower.includes(key.toLowerCase()) || key.toLowerCase().includes(emotionLower)) {\n\t\t\t\t\treturn value\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 3. Â¶ÇÊûúÂêéÁ´ØËøîÂõûÁöÑÊòØÊÉÖÁª™Ê†áÁ≠æÂàóË°®‰∏≠ÁöÑÂÄºÔºåÁõ¥Êé•ËøîÂõû\n\t\t\tif (this.emotionTags.includes(emotion)) {\n\t\t\t\treturn emotion\n\t\t\t}\n\t\t\t\n\t\t\t// 4. ÈªòËÆ§ËøîÂõûÂπ≥ÈùôÔºà‰∏≠ÊÄßÊÉÖÁª™Ôºâ\n\t\t\tconsole.warn('Êú™ËØÜÂà´ÁöÑÊÉÖÁª™:', emotion, 'Ôºå‰ΩøÁî®ÈªòËÆ§ÂÄº: Âπ≥Èùô')\n\t\t\treturn 'Âπ≥Èùô'\n\t\t},\n\t\t\n\t\t// ÂÖ≥Èó≠ÊÉÖÁª™ÂàÜÊûêÁªìÊûú\n\t\tcloseEmotionResult() {\n\t\t\tthis.emotionResult = null\n\t\t},\n\t\t\n\t\t// ÈÄâÊã©ÂõæÁâáËøõË°åÂ§öÊ®°ÊÄÅÂàÜÊûê\n\t\tchooseImageForAnalysis() {\n\t\t\t// ÂÖàÊ£ÄÊü•ÊùÉÈôê\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('ÂΩìÂâçÊùÉÈôêËÆæÁΩÆ:', res.authSetting)\n\t\t\t\t\t\n\t\t\t\t\t// Ê£ÄÊü•Áõ∏Êú∫ÂíåÁõ∏ÂÜåÊùÉÈôê\n\t\t\t\t\tconst hasCameraAuth = res.authSetting['scope.camera'] !== false\n\t\t\t\t\tconst hasAlbumAuth = res.authSetting['scope.writePhotosAlbum'] !== false\n\t\t\t\t\t\n\t\t\t\t\tif (!hasCameraAuth || !hasAlbumAuth) {\n\t\t\t\t\t\t// ËØ∑Ê±ÇÊùÉÈôê\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.camera',\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('Áõ∏Êú∫ÊùÉÈôêÊéàÊùÉÊàêÂäü')\n\t\t\t\t\t\t\t\tthis.selectImage()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.log('Áõ∏Êú∫ÊùÉÈôêÊéàÊùÉÂ§±Ë¥•:', err)\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: 'ÊùÉÈôêÊèêÁ§∫',\n\t\t\t\t\t\t\t\t\tcontent: 'ÈúÄË¶ÅÁõ∏Êú∫ÂíåÁõ∏ÂÜåÊùÉÈôêÊù•ÈÄâÊã©ÂõæÁâáÔºåËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØ',\n\t\t\t\t\t\t\t\t\tconfirmText: 'ÂéªËÆæÁΩÆ',\n\t\t\t\t\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (settingRes) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('ËÆæÁΩÆÈ°µÈù¢ËøîÂõû:', settingRes)\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (settingRes.authSetting['scope.camera'] && settingRes.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectImage()\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Â∑≤ÊúâÊùÉÈôêÔºåÁõ¥Êé•ÈÄâÊã©ÂõæÁâá\n\t\t\t\t\t\tthis.selectImage()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('Ëé∑ÂèñÊùÉÈôêËÆæÁΩÆÂ§±Ë¥•:', err)\n\t\t\t\t\t// Áõ¥Êé•Â∞ùËØïÈÄâÊã©ÂõæÁâá\n\t\t\t\t\tthis.selectImage()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// ÂÆûÈôÖÈÄâÊã©ÂõæÁâáÁöÑÊñπÊ≥ï\n\t\tselectImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: ['original', 'compressed'],\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('ÈÄâÊã©ÂõæÁâáÊàêÂäü:', res)\n\t\t\t\t\tthis.selectedImage = res.tempFilePaths[0]\n\t\t\t\t\tthis.analyzeImageEmotion()\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', err)\n\t\t\t\t\t\n\t\t\t\t\t// Ê†πÊçÆÈîôËØØÁ±ªÂûãÁªôÂá∫‰∏çÂêåÁöÑÊèêÁ§∫\n\t\t\t\t\tif (err.errMsg && err.errMsg.includes('cancel')) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'Â∑≤ÂèñÊ∂àÈÄâÊã©ÂõæÁâá',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (err.errMsg && err.errMsg.includes('auth')) {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: 'ÊùÉÈôê‰∏çË∂≥',\n\t\t\t\t\t\t\tcontent: 'ÈúÄË¶ÅÁõ∏Êú∫ÂíåÁõ∏ÂÜåÊùÉÈôêÔºåËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØ',\n\t\t\t\t\t\t\tconfirmText: 'ÂéªËÆæÁΩÆ',\n\t\t\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\t\t\tuni.openSetting()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// ÈÄâÊã©Èü≥È¢ëËøõË°åÂ§öÊ®°ÊÄÅÂàÜÊûê\n\t\tchooseAudioForAnalysis() {\n\t\t\t// ÂÖàÊ£ÄÊü•ÊùÉÈôê\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('ÂΩìÂâçÊùÉÈôêËÆæÁΩÆ:', res.authSetting)\n\t\t\t\t\t\n\t\t\t\t\t// Ê£ÄÊü•ÂΩïÈü≥ÊùÉÈôê\n\t\t\t\t\tconst hasRecordAuth = res.authSetting['scope.record'] !== false\n\t\t\t\t\t\n\t\t\t\t\tif (!hasRecordAuth) {\n\t\t\t\t\t\t// ËØ∑Ê±ÇÊùÉÈôê\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.record',\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('ÂΩïÈü≥ÊùÉÈôêÊéàÊùÉÊàêÂäü')\n\t\t\t\t\t\t\t\tthis.selectAudio()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.log('ÂΩïÈü≥ÊùÉÈôêÊéàÊùÉÂ§±Ë¥•:', err)\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: 'ÊùÉÈôêÊèêÁ§∫',\n\t\t\t\t\t\t\t\t\tcontent: 'ÈúÄË¶ÅÂΩïÈü≥ÊùÉÈôêÊù•ÈÄâÊã©Èü≥È¢ëÔºåËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØ',\n\t\t\t\t\t\t\t\t\tconfirmText: 'ÂéªËÆæÁΩÆ',\n\t\t\t\t\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (settingRes) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('ËÆæÁΩÆÈ°µÈù¢ËøîÂõû:', settingRes)\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (settingRes.authSetting['scope.record']) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectAudio()\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Â∑≤ÊúâÊùÉÈôêÔºåÁõ¥Êé•ÈÄâÊã©Èü≥È¢ë\n\t\t\t\t\t\tthis.selectAudio()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('Ëé∑ÂèñÊùÉÈôêËÆæÁΩÆÂ§±Ë¥•:', err)\n\t\t\t\t\t// Áõ¥Êé•Â∞ùËØïÈÄâÊã©Èü≥È¢ë\n\t\t\t\t\tthis.selectAudio()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\t// ÂÆûÈôÖÈÄâÊã©Èü≥È¢ëÁöÑÊñπÊ≥ï\n\t\tselectAudio() {\n\t\t\t// ‰ºòÂÖà‰ΩøÁî® chooseAudioÔºàÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂéüÁîüAPIÔºâ\n\t\t\tif (uni.chooseAudio && typeof uni.chooseAudio === 'function') {\n\t\t\t\tuni.chooseAudio({\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('ÈÄâÊã©Èü≥È¢ëÊàêÂäü:', res)\n\t\t\t\t\t\tthis.selectedAudio = {\n\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\n\t\t\t\t\t\t\tname: res.tempFilePath.split('/').pop() || 'audio.mp3',\n\t\t\t\t\t\t\tsize: res.size || 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.analyzeAudioEmotion()\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('chooseAudio ÈÄâÊã©Èü≥È¢ëÂ§±Ë¥•:', err)\n\t\t\t\t\t\t// chooseAudio Â§±Ë¥•Êó∂ÔºåÂ∞ùËØï‰ΩøÁî® chooseMedia\n\t\t\t\t\t\tthis.selectAudioWithChooseMedia()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// chooseAudio ‰∏çÂèØÁî®Êó∂Ôºå‰ΩøÁî® chooseMedia\n\t\t\t\tthis.selectAudioWithChooseMedia()\n\t\t\t}\n\t\t},\n\t\t\n\t\t// ‰ΩøÁî® chooseMedia ÈÄâÊã©Èü≥È¢ëÔºàÂ§áÈÄâÊñπÊ°àÔºâ\n\t\tselectAudioWithChooseMedia() {\n\t\t\tif (uni.chooseMedia && typeof uni.chooseMedia === 'function') {\n\t\t\t\tuni.chooseMedia({\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tmediaType: ['audio'],\n\t\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('chooseMedia ÈÄâÊã©Èü≥È¢ëÊàêÂäü:', res)\n\t\t\t\t\t\tif (res.tempFiles && res.tempFiles.length > 0) {\n\t\t\t\t\t\t\tconst file = res.tempFiles[0]\n\t\t\t\t\t\t\tthis.selectedAudio = {\n\t\t\t\t\t\t\t\ttempFilePath: file.tempFilePath,\n\t\t\t\t\t\t\t\tname: file.name || file.tempFilePath.split('/').pop() || 'audio.mp3',\n\t\t\t\t\t\t\t\tsize: file.size || 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.analyzeAudioEmotion()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.handleAudioSelectError({ errMsg: 'Êú™ÈÄâÊã©Èü≥È¢ëÊñá‰ª∂' })\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('chooseMedia ÈÄâÊã©Èü≥È¢ëÂ§±Ë¥•:', err)\n\t\t\t\t\t\tthis.handleAudioSelectError(err)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// ‰∏§ÁßçÊñπÊ≥ïÈÉΩ‰∏çÂèØÁî®\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ÂΩìÂâçÁéØÂ¢É‰∏çÊîØÊåÅÈü≥È¢ëÈÄâÊã©',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\t\n\t\t// Â§ÑÁêÜÈü≥È¢ëÈÄâÊã©ÈîôËØØ\n\t\thandleAudioSelectError(err) {\n\t\t\tif (err.errMsg && err.errMsg.includes('cancel')) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Â∑≤ÂèñÊ∂àÈÄâÊã©Èü≥È¢ë',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} else if (err.errMsg && err.errMsg.includes('auth')) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'ÊùÉÈôê‰∏çË∂≥',\n\t\t\t\t\tcontent: 'ÈúÄË¶ÅÂΩïÈü≥ÊùÉÈôêÔºåËØ∑Âú®ËÆæÁΩÆ‰∏≠ÂºÄÂêØ',\n\t\t\t\t\tconfirmText: 'ÂéªËÆæÁΩÆ',\n\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\tuni.openSetting()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ÈÄâÊã©Èü≥È¢ëÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tonUnload() {\n\t\t\t// È°µÈù¢Âç∏ËΩΩÊó∂ÁöÑÊ∏ÖÁêÜÂ∑•‰Ωú\n\t\t},\n\t\t\n\t\t// Ê†ºÂºèÂåñÈü≥È¢ëÊó∂Èó¥\n\t\tformatAudioTime(seconds) {\n\t\t\tif (!seconds || isNaN(seconds)) return '00:00'\n\t\t\tconst mins = Math.floor(seconds / 60)\n\t\t\tconst secs = Math.floor(seconds % 60)\n\t\t\treturn `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`\n\t\t},\n\t\t\n\t\t// ÁßªÈô§Â∑≤ÈÄâÊã©ÁöÑÂõæÁâá\n\t\tremoveSelectedImage() {\n\t\t\tthis.selectedImage = null\n\t\t\tthis.multimodalResult = null // Ê∏ÖÁ©∫Â§öÊ®°ÊÄÅÁªìÊûú\n\t\t},\n\t\t\n\t\t// ÁßªÈô§Â∑≤ÈÄâÊã©ÁöÑÈü≥È¢ë\n\t\tremoveSelectedAudio() {\n\t\t\tthis.selectedAudio = null\n\t\t\tthis.multimodalResult = null // Ê∏ÖÁ©∫Â§öÊ®°ÊÄÅÁªìÊûú\n\t\t},\n\t\t\n\t\t// Ê†ºÂºèÂåñÊñá‰ª∂Â§ßÂ∞è\n\t\tformatFileSize(size) {\n\t\t\tif (size === 0) return '0 Bytes';\n\t\t\tconst k = 1024;\n\t\t\tconst sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\t\t\tconst i = Math.floor(Math.log(size) / Math.log(k));\n\t\t\treturn parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n\t\t},\n\t\t\n\t\t// ÂàÜÊûêÂõæÁâáÊÉÖÁª™\n\t\tasync analyzeImageEmotion() {\n\t\t\tif (!this.selectedImage) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ÂÖàÈÄâÊã©‰∏ÄÂº†ÂõæÁâá',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.analyzingImage = true\n\t\t\ttry {\n\t\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\t\t\tconst uid = userInfo ? userInfo.uid : ''\n\t\t\t\t\n\t\t\t\tif (!uid) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Áî®Êà∑Êú™ÁôªÂΩïÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('ÂºÄÂßãÂõæÁâáÊÉÖÁª™ÂàÜÊûêÔºåÊñá‰ª∂:', this.selectedImage)\n\t\t\t\t\n\t\t\t\tconst uploadRes = await new Promise((resolve, reject) => {\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: baseUrl + '/app/emotion/analyze/image',\n\t\t\t\t\t\tfilePath: this.selectedImage,\n\t\t\t\t\t\tname: 'image',\n\t\t\t\t\t\theader: { 'uid': uid },\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tconsole.log('ÂõæÁâá‰∏ä‰º†ÊàêÂäü:', res)\n\t\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('ÂõæÁâá‰∏ä‰º†Â§±Ë¥•:', err)\n\t\t\t\t\t\t\treject(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\tconsole.log('ÂõæÁâáÂàÜÊûêÂìçÂ∫î:', uploadRes)\n\t\t\t\t\n\t\t\t\tlet response\n\t\t\t\ttry { \n\t\t\t\t\tresponse = JSON.parse(uploadRes.data) \n\t\t\t\t\tconsole.log('Ëß£ÊûêÂêéÁöÑÂìçÂ∫î:', response)\n\t\t\t\t} catch (e) { \n\t\t\t\t\tconsole.error('ÂìçÂ∫îËß£ÊûêÂ§±Ë¥•:', e, uploadRes.data)\n\t\t\t\t\tresponse = {} \n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (response && (response.code === 200 || response.status === 'ok')) {\n\t\t\t\t\tconst data = response.data || response.result || response\n\t\t\t\t\tthis.multimodalResult = { ...this.multimodalResult, image: data.data || data.image || data }\n\t\t\t\t\t\n\t\t\t\t\t// Ëá™Âä®Êõ¥Êñ∞ÊÉÖÁª™Ê†áÁ≠æ\n\t\t\t\t\tconst emotion = data.emotion || data.data?.emotion || data.image?.emotion || data.label || data.primaryEmotion\n\t\t\t\t\tif (emotion) {\n\t\t\t\t\t\tconst mappedEmotion = this.mapEmotionToTag(emotion)\n\t\t\t\t\t\tthis.selectedEmotion = mappedEmotion\n\t\t\t\t\t\tconsole.log('ÂõæÂÉèÊÉÖÁª™ËØÜÂà´:', { ÂéüÂßã: emotion, Êò†Â∞ÑÂêé: mappedEmotion })\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'ÂõæÂÉèÊÉÖÁª™ÂàÜÊûêÂÆåÊàê',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('ÂõæÁâáÂàÜÊûêÂ§±Ë¥•ÔºåÂìçÂ∫î:', response)\n\t\t\t\t\tuni.showToast({ \n\t\t\t\t\t\ttitle: response.message || 'ÂõæÂÉèÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•', \n\t\t\t\t\t\ticon: 'none' \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('ÂõæÂÉèÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ÂõæÂÉèÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.analyzingImage = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// ÂàÜÊûêÈü≥È¢ëÊÉÖÁª™\n\t\tasync analyzeAudioEmotion() {\n\t\t\tif (!this.selectedAudio) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™Èü≥È¢ëÊñá‰ª∂',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tthis.analyzingAudio = true\n\t\t\ttry {\n\t\t\t\tconst baseUrl = this.getBaseUrl()\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\n\t\t\t\tconst uid = userInfo ? userInfo.uid : ''\n\t\t\t\t\n\t\t\t\tif (!uid) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Áî®Êà∑Êú™ÁôªÂΩïÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('ÂºÄÂßãÈü≥È¢ëÊÉÖÁª™ÂàÜÊûêÔºåÊñá‰ª∂:', this.selectedAudio)\n\t\t\t\t\n\t\t\t\tconst uploadRes = await new Promise((resolve, reject) => {\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: baseUrl + '/api/emotion/analyze/audio',\n\t\t\t\t\t\tfilePath: this.selectedAudio.tempFilePath,\n\t\t\t\t\t\tname: 'audio',\n\t\t\t\t\t\theader: { 'uid': uid },\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tconsole.log('Èü≥È¢ë‰∏ä‰º†ÊàêÂäü:', res)\n\t\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('Èü≥È¢ë‰∏ä‰º†Â§±Ë¥•:', err)\n\t\t\t\t\t\t\treject(err)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\tconsole.log('Èü≥È¢ëÂàÜÊûêÂìçÂ∫î:', uploadRes)\n\t\t\t\t\n\t\t\t\tlet response\n\t\t\t\ttry { \n\t\t\t\t\tresponse = JSON.parse(uploadRes.data) \n\t\t\t\t\tconsole.log('Ëß£ÊûêÂêéÁöÑÂìçÂ∫î:', response)\n\t\t\t\t} catch (e) { \n\t\t\t\t\tconsole.error('ÂìçÂ∫îËß£ÊûêÂ§±Ë¥•:', e, uploadRes.data)\n\t\t\t\t\tresponse = {} \n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (response && (response.code === 200 || response.status === 'ok')) {\n\t\t\t\t\tconst data = response.data || response.result || response\n\t\t\t\t\tthis.multimodalResult = { ...this.multimodalResult, audio: data.data || data.audio || data }\n\t\t\t\t\t\n\t\t\t\t\t// Ëá™Âä®Êõ¥Êñ∞ÊÉÖÁª™Ê†áÁ≠æ\n\t\t\t\t\tconst emotion = data.emotion || data.data?.emotion || data.audio?.emotion || data.label || data.primaryEmotion\n\t\t\t\t\tif (emotion) {\n\t\t\t\t\t\tconst mappedEmotion = this.mapEmotionToTag(emotion)\n\t\t\t\t\t\tthis.selectedEmotion = mappedEmotion\n\t\t\t\t\t\tconsole.log('Èü≥È¢ëÊÉÖÁª™ËØÜÂà´:', { ÂéüÂßã: emotion, Êò†Â∞ÑÂêé: mappedEmotion })\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'Èü≥È¢ëÊÉÖÁª™ÂàÜÊûêÂÆåÊàê',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('Èü≥È¢ëÂàÜÊûêÂ§±Ë¥•ÔºåÂìçÂ∫î:', response)\n\t\t\t\t\tuni.showToast({ \n\t\t\t\t\t\ttitle: response.message || 'Èü≥È¢ëÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•', \n\t\t\t\t\t\ticon: 'none' \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Èü≥È¢ëÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Èü≥È¢ëÊÉÖÁª™ÂàÜÊûêÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.analyzingAudio = false\n\t\t\t}\n\t\t},\n\t\t\n\t\t// ÂÖ≥Èó≠Â§öÊ®°ÊÄÅÂàÜÊûêÁªìÊûú\n\t\tcloseMultimodalResult() {\n\t\t\tthis.multimodalResult = null\n\t\t},\n\t\t\n\t\tasync saveAsDraft() {\n\t\t\tawait this.saveDiary('draft')\n\t\t},\n\t\t\n\t\tasync publishDiary() {\n\t\t\tawait this.saveDiary('published')\n\t\t},\n\t\t\n\t\tasync saveDiary(status) {\n\t\t\tif (!this.diaryContent.trim()) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ËæìÂÖ•Êó•ËÆ∞ÂÜÖÂÆπ',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: '‰øùÂ≠ò‰∏≠...' })\n\t\t\t\t\n\t\t\t\tconst diaryData = {\n\t\t\t\t\tcontent: this.diaryContent,\n\t\t\t\t\temotion: this.selectedEmotion,\n\t\t\t\t\tcreateTime: this.diaryDate,\n\t\t\t\t\tstatus: status\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet response\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\tresponse = await diaryApi.updateDiary(this.diaryId, diaryData)\n\t\t\t\t} else {\n\t\t\t\t\tresponse = await diaryApi.createDiary(diaryData)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (response && response.code === 200) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: status === 'draft' ? 'ËçâÁ®ø‰øùÂ≠òÊàêÂäü' : 'Êó•ËÆ∞ÂèëÂ∏ÉÊàêÂäü',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t}, 1500)\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: response?.message || '‰øùÂ≠òÂ§±Ë¥•',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('‰øùÂ≠òÊó•ËÆ∞Â§±Ë¥•:', error)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.edit-container {\n\tmin-height: 100vh;\n\tbackground: transparent;\n\tpadding: 0;\n}\n\n.nav-bar {\n\tbackground: transparent;\n\tpadding: 30rpx 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tborder-bottom: 1rpx solid rgba(0, 0, 0, 0.1);\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 100;\n}\n\n/* ‰øÆÊîπËøîÂõûÊåâÈíÆÊ†∑Âºè */\n.back-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 50%;\n\tbackground: rgba(99, 102, 241, 0.1);\n\ttransition: all 0.3s ease;\n}\n\n.back-btn:active {\n\tbackground: rgba(99, 102, 241, 0.2);\n\ttransform: scale(0.95);\n}\n\n.back-icon {\n\tfont-size: 36rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 600;\n}\n\n/* ÁßªÈô§ËøîÂõûÊñáÂ≠óÊ†∑Âºè */\n.back-text {\n\tdisplay: none;\n}\n\n.page-title {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: '1f2937';\n}\n\n.placeholder {\n\twidth: 60rpx; /* ‰∏éËøîÂõûÊåâÈíÆÂÆΩÂ∫¶Áõ∏ÂêåÔºå‰øùÊåÅÂ∏ÉÂ±ÄÂπ≥Ë°° */\n}\n\n.content {\n\tpadding: 30rpx;\n\tpadding-bottom: 120rpx;\n}\n\n.input-section {\n\tpadding: 30rpx 0;\n\tmargin-bottom: 30rpx;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n\n.diary-input {\n\twidth: 100%;\n\tmin-height: 300rpx;\n\tbackground: transparent;\n\tborder: none;\n\tfont-size: 30rpx;\n\tcolor: #2d3748;\n\tline-height: 1.6;\n\tresize: none;\n}\n\n.char-count {\n\tdisplay: block;\n\ttext-align: right;\n\tfont-size: 24rpx;\n\tcolor: #718096;\n\tmargin-top: 20rpx;\n}\n\n.settings-section {\n\tpadding: 30rpx 0;\n\tmargin-bottom: 30rpx;\n}\n\n.setting-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 25rpx 0;\n\tborder-bottom: 1rpx solid #f1f5f9;\n}\n\n.setting-item:last-child {\n\tborder-bottom: none;\n}\n\n.setting-label {\n\tfont-size: 28rpx;\n\tcolor: #2d3748;\n\tfont-weight: 500;\n}\n\n.picker-field {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.picker-text {\n\tfont-size: 26rpx;\n\tcolor: #4a90e2;\n}\n\n.picker-arrow {\n\tfont-size: 24rpx;\n\tcolor: #a0aec0;\n}\n\n.emotion-setting-item {\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\n.emotion-setting-item .setting-label {\n\tmargin-bottom: 15rpx;\n}\n\n.multimodal-setting-item {\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\n.multimodal-setting-item .setting-label {\n\tmargin-bottom: 15rpx;\n}\n\n.emotion-section {\n\twidth: 100%;\n\tmargin-top: 10rpx;\n}\n\n.emotion-display {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n\twidth: 100%;\n}\n\n.emotion-tag {\n\tflex: 1;\n\tpadding: 20rpx 30rpx;\n\tbackground: linear-gradient(135deg, #f0f9ff, #e0f2fe);\n\tborder: 2rpx solid #0ea5e9;\n\tborder-radius: 12rpx;\n\tfont-size: 28rpx;\n\tcolor: #0369a1;\n\tfont-weight: 500;\n\ttext-align: center;\n\tmin-height: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.analyzing-text {\n\tfont-size: 24rpx;\n\tcolor: #64748b;\n\tfont-style: italic;\n}\n\n.emotion-result {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, 'e6f3ff');\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #d1e7ff;\n\twidth: 100%;\n}\n\n.result-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 16rpx;\n}\n\n.result-title {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #2c5aa0;\n}\n\n.close-btn {\n\tfont-size: 32rpx;\n\tcolor: #a0aec0;\n\tcursor: pointer;\n}\n\n.result-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 12rpx;\n}\n\n.result-item {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.result-label {\n\tfont-size: 24rpx;\n\tcolor: #666;\n\tmin-width: 120rpx;\n}\n\n.result-value {\n\tfont-size: 24rpx;\n\tfont-weight: 500;\n\tcolor: #333;\n}\n\n.multimodal-section {\n\tmargin-top: 30rpx;\n\tpadding-top: 20rpx;\n\tborder-top: 1rpx solid #f1f5f9;\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.multimodal-title {\n\tfont-size: 26rpx;\n\tfont-weight: 600;\n\tcolor: #2d3748;\n\tmargin-bottom: 16rpx;\n}\n\n.multimodal-buttons {\n\tdisplay: flex;\n\tgap: 15rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.multimodal-btn {\n\tflex: 1;\n\tpadding: 16rpx 20rpx;\n\tborder-radius: 12rpx;\n\tfont-size: 24rpx;\n\tfont-weight: 600;\n\tborder: none;\n\ttransition: all 0.3s ease;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 8rpx;\n}\n\n.cv-btn {\n\tbackground: linear-gradient(135deg, #4299e1, #3182ce);\n\tcolor: white;\n}\n\n.audio-btn {\n\tbackground: linear-gradient(135deg, #48bb78, #38a169);\n\tcolor: white;\n}\n\n.multimodal-btn:active {\n\ttransform: translateY(2rpx);\n}\n\n.btn-icon {\n\tfont-size: 28rpx;\n}\n\n.btn-text {\n\tfont-size: 24rpx;\n}\n\n.image-preview-section {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, #e6f3ff);\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #d1e7ff;\n}\n\n.image-preview-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 16rpx;\n}\n\n.preview-title {\n\tfont-size: 24rpx;\n\tfont-weight: 500;\n\tcolor: #2d3748;\n}\n\n.preview-actions {\n\tdisplay: flex;\n\tgap: 15rpx;\n\tfont-size: 24rpx;\n\tcolor: #4a90e2;\n}\n\n.action-link {\n\ttext-decoration: underline;\n}\n\n.delete {\n\tcolor: #e53e3e;\n}\n\n.preview-image {\n\twidth: 100%;\n\theight: 200rpx;\n\tobject-fit: cover;\n\tborder-radius: 12rpx;\n\tmargin-bottom: 15rpx;\n}\n\n.analyze-image-btn {\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 12rpx;\n\tpadding: 16rpx 24rpx;\n\tfont-size: 24rpx;\n\tfont-weight: 600;\n\ttransition: all 0.3s ease;\n}\n\n.analyze-image-btn:active {\n\ttransform: translateY(2rpx);\n}\n\n.audio-preview-section {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, #e6f3ff);\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #d1e7ff;\n}\n\n.audio-preview-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 16rpx;\n}\n\n.audio-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tfont-size: 24rpx;\n\tcolor: #4a5568;\n\tmargin-bottom: 15rpx;\n}\n\n.audio-name {\n\tfont-weight: 500;\n}\n\n.audio-size {\n\tcolor: #718096;\n}\n\n.analyze-audio-btn {\n\tbackground: linear-gradient(135deg, #4a90e2, #6aa8ff);\n\tcolor: white;\n\tborder: none;\n\tborder-radius: 12rpx;\n\tpadding: 16rpx 24rpx;\n\tfont-size: 24rpx;\n\tfont-weight: 600;\n\ttransition: all 0.3s ease;\n}\n\n.analyze-audio-btn:active {\n\ttransform: translateY(2rpx);\n}\n\n.multimodal-result {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, #e6f3ff);\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #d1e7ff;\n}\n\n.attachment-section {\n\tmargin-top: 30rpx;\n\tpadding: 30rpx 0;\n\tborder-top: 1rpx solid #f1f5f9;\n}\n\n.section-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2d3748;\n\tmargin-bottom: 16rpx;\n}\n\n.attachment-tips {\n\tfont-size: 24rpx;\n\tcolor: #718096;\n\tmargin-bottom: 20rpx;\n}\n\n.attachment-buttons {\n\tdisplay: flex;\n\tgap: 15rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.attach-btn {\n\tflex: 1;\n\tpadding: 20rpx;\n\tborder-radius: 12rpx;\n\tborder: 2rpx solid #e2e8f0;\n\tbackground: #ffffff;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tgap: 8rpx;\n\ttransition: all 0.3s ease;\n}\n\n.attach-btn:active {\n\ttransform: scale(0.95);\n\tbackground: #f7fafc;\n}\n\n.image-btn {\n\tborder-color: #4299e1;\n}\n\n.video-btn {\n\tborder-color: #48bb78;\n}\n\n.audio-btn {\n\tborder-color: #ed8936;\n}\n\n.attach-icon {\n\tfont-size: 32rpx;\n}\n\n.attach-text {\n\tfont-size: 24rpx;\n\tcolor: #2d3748;\n\tfont-weight: 500;\n}\n\n.attachment-preview-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.attachment-item {\n\tbackground: #f7fafc;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tborder: 1rpx solid #e2e8f0;\n}\n\n.attachment-preview {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 15rpx;\n}\n\n.preview-img {\n\twidth: 100%;\n\theight: 300rpx;\n\tborder-radius: 12rpx;\n\tobject-fit: cover;\n}\n\n.preview-video {\n\twidth: 100%;\n\theight: 300rpx;\n\tborder-radius: 12rpx;\n}\n\n.attachment-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.attachment-name {\n\tfont-size: 26rpx;\n\tcolor: #2d3748;\n\tfont-weight: 500;\n}\n\n.attachment-size {\n\tfont-size: 24rpx;\n\tcolor: #718096;\n}\n\n.attachment-actions {\n\tdisplay: flex;\n\tgap: 20rpx;\n\tjustify-content: flex-end;\n}\n\n.action-btn {\n\tfont-size: 24rpx;\n\tcolor: #4a90e2;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 8rpx;\n\tbackground: rgba(74, 144, 226, 0.1);\n}\n\n.action-btn.delete {\n\tcolor: #e53e3e;\n\tbackground: rgba(229, 62, 62, 0.1);\n}\n\n.audio-preview-box {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 15rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, #e6f3ff);\n\tborder-radius: 12rpx;\n}\n\n.audio-icon {\n\tfont-size: 40rpx;\n}\n\n.audio-player-wrapper {\n\tmargin-top: 20rpx;\n}\n\n.audio-control-bar {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #f0f8ff, #e6f3ff);\n\tborder-radius: 16rpx;\n}\n\n.audio-play-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbox-shadow: 0 4rpx 12rpx rgba(74, 144, 226, 0.3);\n}\n\n.play-icon-text {\n\tcolor: white;\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n}\n\n.audio-progress-area {\n\tflex: 1;\n}\n\n.audio-info-line {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 12rpx;\n}\n\n.audio-title {\n\tfont-size: 24rpx;\n\tcolor: #2d3748;\n\tfont-weight: 500;\n}\n\n.audio-time {\n\tfont-size: 22rpx;\n\tcolor: #718096;\n}\n\n.progress-bar-wrapper {\n\twidth: 100%;\n\theight: 8rpx;\n\tbackground: #e2e8f0;\n\tborder-radius: 4rpx;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n.progress-bar-fill {\n\theight: 100%;\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n\tborder-radius: 4rpx;\n\ttransition: width 0.1s ease;\n}\n\n.action-section {\n\tdisplay: flex;\n\tgap: 20rpx;\n\tposition: fixed;\n\tbottom: 30rpx;\n\tleft: 30rpx;\n\tright: 30rpx;\n\tz-index: 10;\n}\n\n.draft-btn,\n.publish-btn {\n\tflex: 1;\n\tpadding: 24rpx;\n\tborder-radius: 16rpx;\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tborder: none;\n\ttransition: all 0.3s ease;\n}\n\n.draft-btn {\n\tbackground: rgba(255, 255, 255, 0.9);\n\tcolor: #4a90e2;\n\tborder: 2rpx solid rgba(99, 102, 241, 0.3);\n\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\n}\n\n.draft-btn:active {\n\tbackground: rgba(99, 102, 241, 0.1);\n\ttransform: translateY(2rpx);\n}\n\n.publish-btn {\n\tbackground: linear-gradient(135deg, #4a90e2 0%, #6aa8ff 100%);\n\tcolor: white;\n\tbox-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.3);\n}\n\n.publish-btn:active {\n\ttransform: translateY(2rpx);\n\tbox-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.4);\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 768px) {\n\t.nav-bar {\n\t\tpadding: 24rpx 30rpx;\n\t}\n\t\n\t.content {\n\t\tpadding: 20rpx;\n\t\tpadding-bottom: 120rpx;\n\t}\n\t\n\t.input-section, .settings-section {\n\t\tpadding: 24rpx;\n\t}\n\t\n\t.diary-input {\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t.multimodal-buttons {\n\t\tflex-direction: column;\n\t}\n\t\n\t.action-section {\n\t\tleft: 20rpx;\n\t\tright: 20rpx;\n\t\tbottom: 20rpx;\n\t}\n}\n</style>","import MiniProgramPage from '/Users/minchi/Desktop/DailyBaro/DailyBaro-app/src/pages/diary/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","config","filePath","baseUrl","diaryApi","formatDateToStandard"],"mappings":"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"}